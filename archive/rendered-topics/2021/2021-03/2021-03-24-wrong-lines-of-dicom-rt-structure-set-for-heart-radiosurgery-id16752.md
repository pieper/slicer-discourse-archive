# Wrong lines of DICOM RT Structure Set for heart radiosurgery

**Topic ID**: 16752
**Date**: 2021-03-24
**URL**: https://discourse.slicer.org/t/wrong-lines-of-dicom-rt-structure-set-for-heart-radiosurgery/16752

---

## Post #1 by @Cody_Xie (2021-03-24 19:24 UTC)

<p>Dear all, there is a problem that has bothered me for a long time.</p>
<p>Operating system: Windows 10<br>
Slicer version: 4.11<br>
Expected behavior: Import a DICOM-RT Structure Set of a heart radiosurgery target, which has two regions (substrates). And the DICOM-RT SS file is generated by MATLAB, and in MATLAB it can be shown correctly.<br>
Actual behavior: I guess the screenshot is self explanatory. The heart radiosurgery target can be imported, but there are redundant straight lines (wrong lines) between the two regions (substrates). And it is also very clear that in the 3D view, the two regions (substrates) are linked by so many lines. May I know how I can delete these lines which I don’t need?</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/c/e/ce46f23ee790238576d8b697fe5be826f2b67590.png" data-download-href="/uploads/short-url/tqOmm94wW0ktZF19PJf3BSXEHLi.png?dl=1" title="Slicer - Substrate" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/e/ce46f23ee790238576d8b697fe5be826f2b67590_2_690x237.png" alt="Slicer - Substrate" data-base62-sha1="tqOmm94wW0ktZF19PJf3BSXEHLi" width="690" height="237" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/e/ce46f23ee790238576d8b697fe5be826f2b67590_2_690x237.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/e/ce46f23ee790238576d8b697fe5be826f2b67590_2_1035x355.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/c/e/ce46f23ee790238576d8b697fe5be826f2b67590.png 2x" data-dominant-color="9199A7"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Slicer - Substrate</span><span class="informations">1255×432 170 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Should you need more information, please inform me. Thank you so much in advance!</p>
<p>Best,<br>
Cody</p>

---

## Post #2 by @cpinter (2021-03-25 08:47 UTC)

<p>For very complex geometries, the triangulation to closed surface model sometimes fails. In these cases you can use the alternative “ribbon” models. There is a good description here:</p><aside class="quote quote-modified" data-post="6" data-topic="15973">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/lassoan/48/13_2.png" class="avatar">
    <a href="https://discourse.slicer.org/t/clarification-re-rtstruct-display/15973/6">Clarification re RTSTRUCT display</a> <a class="badge-category__wrapper " href="/c/support/11"><span data-category-id="11" style="--category-badge-color: #3AB54A; --category-badge-text-color: #FFFFFF;" data-drop-close="true" class="badge-category " title="The Support category is for all usage questions and general discussion of Slicer and extensions."><span class="badge-category__name">Support</span></span></a>
  </div>
  <blockquote>
    This is expected - you only see the contour in-plane if it is exactly in the slice view’s plane. This is exact match may be hard to achieve, that is why we added the ribbon representation, which is much better visible in slice views. 
Planar contours: 
 <a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/1/5/158f41841218fb97f08bbc58851fa45022aa3ab9.png" data-download-href="/uploads/short-url/34IWYHDmVqxYCRI8NiJQLKLabNf.png?dl=1" title="image">[image]</a> 
Ribbon model: 
 <a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/9/e/9e7234e0673eee583dc1a7c35a2e8b9eb73d32e5.jpeg" data-download-href="/uploads/short-url/mBG7RafDseCxKrCEKsX775GSpNj.jpeg?dl=1" title="image">[image]</a> 
These features are somewhat hidden, but both planar contours and ribbon model are useful mainly for diagnostic purposes (when closed surface representation does not look good then you can check the original data…
  </blockquote>
</aside>
<p>
also here</p><aside class="quote quote-modified" data-post="12" data-topic="1926">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/cpinter/48/7995_2.png" class="avatar">
    <a href="https://discourse.slicer.org/t/rtstruct-not-showing-contour/1926/12">RTstruct not showing contour</a> <a class="badge-category__wrapper " href="/c/support/11"><span data-category-id="11" style="--category-badge-color: #3AB54A; --category-badge-text-color: #FFFFFF;" data-drop-close="true" class="badge-category " title="The Support category is for all usage questions and general discussion of Slicer and extensions."><span class="badge-category__name">Support</span></span></a>
  </div>
  <blockquote>
    The ribbon method yields a segment that looks nicer and that allows labelmaps to be created. The segment’s volume was calculated to be 0.209cc, which is about half of what you said it is in MIM. This makes complete sense if we consider interpolation (i.e. the aforementioned end-capping, which is performed in this scenario as well), instead of the raw ribbon method. 
I had to do one fix in the ribbon converter as well. It required at least two cells in the polydata, but I don’t know why so I decr…
  </blockquote>
</aside>


---

## Post #3 by @Cody_Xie (2021-03-25 09:58 UTC)

<p>Hi Csaba,</p>
<p>many thanks for your information and support! I will try this method.</p>

---

## Post #4 by @Cody_Xie (2021-03-28 20:33 UTC)

<p>Dear Csaba,</p>
<p>I have tried the <strong>ribbon model</strong> process, it can improve the model display. However, these <strong>wrong lines</strong> still exist (please refer to the screenshots below).</p>
<p>Basically, my input DICOM-RT file contains <strong>two curved surfaces</strong>, and I only want to export these <strong>two curved surfaces</strong>. But it seems that on each slice (axial), the algorithm links the <strong>two curves</strong> into a <strong>closed polygon</strong> automatically. Would it be possible that you give me some support to <strong>delete these wrong lines</strong> when you are available? Any help from your side will be much appreciated.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/7/4/74bde88c5683a79223747728efd3f364f40d73f4.jpeg" data-download-href="/uploads/short-url/gEKgkBlCr1V6IPFnAcnLKlo9fFO.jpeg?dl=1" title="2" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/7/74bde88c5683a79223747728efd3f364f40d73f4_2_690x273.jpeg" alt="2" data-base62-sha1="gEKgkBlCr1V6IPFnAcnLKlo9fFO" width="690" height="273" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/7/74bde88c5683a79223747728efd3f364f40d73f4_2_690x273.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/7/74bde88c5683a79223747728efd3f364f40d73f4_2_1035x409.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/7/74bde88c5683a79223747728efd3f364f40d73f4_2_1380x546.jpeg 2x" data-dominant-color="89919E"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">2</span><span class="informations">1467×581 250 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div><br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/d/2/d2cdbe867f389cd334f435dd18dfa1cb6d3b0520.jpeg" data-download-href="/uploads/short-url/u4R4zFpYqFVhQygXVjVwHgyOxu8.jpeg?dl=1" title="1" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/d/d2cdbe867f389cd334f435dd18dfa1cb6d3b0520_2_690x388.jpeg" alt="1" data-base62-sha1="u4R4zFpYqFVhQygXVjVwHgyOxu8" width="690" height="388" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/d/d2cdbe867f389cd334f435dd18dfa1cb6d3b0520_2_690x388.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/d/d2cdbe867f389cd334f435dd18dfa1cb6d3b0520_2_1035x582.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/d/d2cdbe867f389cd334f435dd18dfa1cb6d3b0520_2_1380x776.jpeg 2x" data-dominant-color="AFB3B5"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">1</span><span class="informations">2560×1440 682 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>PS: The reason why I want to import a DICOM-RTSS and export it by Slicer is that the radiosuegery planning system cannot read the DICOM-RT file I generated outside Slicer. And I found that the DICOM-RTSS can be read by the planning system if I import and export it by Slicer.</p>
<p>Thank you so much in advance!</p>

---

## Post #5 by @cpinter (2021-03-29 09:17 UTC)

<p>I think you are right and the extra lines are closing the open surface. Unfortunately SlicerRT does not support open surfaces currently, see this open ticket <a href="https://github.com/SlicerRt/SlicerRT/issues/45" class="inline-onebox">Add support for open contours · Issue #45 · SlicerRt/SlicerRT · GitHub</a></p>
<p>It would not be hard to add, but there is no funding for SlicerRT at the moment, and our free time is very limited. Any contribution is welcome (programming or funding).</p>

---

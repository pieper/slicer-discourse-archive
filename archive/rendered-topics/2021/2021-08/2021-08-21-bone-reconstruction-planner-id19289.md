---
topic_id: 19289
title: "Bone Reconstruction Planner"
date: 2021-08-21
url: https://discourse.slicer.org/t/19289
---

# Bone Reconstruction Planner

**Topic ID**: 19289
**Date**: 2021-08-21
**URL**: https://discourse.slicer.org/t/bone-reconstruction-planner/19289

---

## Post #1 by @manjula (2021-08-21 03:37 UTC)

<p>Yesterday we did the first case of mandibular reconstruction with fibula free flap using  3D Slicer extension, bone reconstruction planner in Sri Lanka at the department of oral and maxillofacial surgery, faculty of the dental sciences university of Peradeniya.  Perhaps this is the first time 3D Slicer was used in Sri Lanka for any surgery. Usually, the fibula surgical cutting guide alone costs around 1000 USDs, and both the resection and cutting guide is around 2000 USD including shipping, which we were getting down from Hong Kong. With this extension now it was developed within premises at fraction of the cost.  The surgery was a success and we are hoping to continue the development.  Thank you <a class="mention" href="/u/mau_igna_06">@mau_igna_06</a>  for his enthusiasm and amazing coding abilities and Prof <a class="mention" href="/u/lassoan">@lassoan</a> for his continued effort in improving this extension.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/a/3/a353c57e1eaa0a751302ad9dede1fb7a4958b499.jpeg" data-download-href="/uploads/short-url/niRj2SblgtVdkshcrjfUoz63qWZ.jpeg?dl=1" title="signal-2021-08-21-080857 (4)" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/a/a353c57e1eaa0a751302ad9dede1fb7a4958b499_2_345x205.jpeg" alt="signal-2021-08-21-080857 (4)" data-base62-sha1="niRj2SblgtVdkshcrjfUoz63qWZ" width="345" height="205" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/a/a353c57e1eaa0a751302ad9dede1fb7a4958b499_2_345x205.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/a/a353c57e1eaa0a751302ad9dede1fb7a4958b499_2_517x307.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/a/a353c57e1eaa0a751302ad9dede1fb7a4958b499_2_690x410.jpeg 2x" data-dominant-color="BD3D3B"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">signal-2021-08-21-080857 (4)</span><span class="informations">1273×759 337 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div><br>
<img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/c/d/cdead8c7233475e9b2f00d11a9cdb5cf7432aa6d.jpeg" alt="signal-2021-08-21-080857 (6)" data-base62-sha1="tnD2ntIfxDiT5hBn6YG6ecFunPn" width="345" height="226"><br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/5/4/54d1a5a8533ba126075d04250d4d19e56511ae7f.jpeg" data-download-href="/uploads/short-url/c6lh0D192BEp9k7fgZBvsxCNowD.jpeg?dl=1" title="signal-2021-08-21-080857 (12)" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/5/54d1a5a8533ba126075d04250d4d19e56511ae7f_2_334x250.jpeg" alt="signal-2021-08-21-080857 (12)" data-base62-sha1="c6lh0D192BEp9k7fgZBvsxCNowD" width="334" height="250" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/5/54d1a5a8533ba126075d04250d4d19e56511ae7f_2_334x250.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/5/54d1a5a8533ba126075d04250d4d19e56511ae7f_2_501x375.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/5/54d1a5a8533ba126075d04250d4d19e56511ae7f_2_668x500.jpeg 2x" data-dominant-color="AD1C29"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">signal-2021-08-21-080857 (12)</span><span class="informations">876×654 239 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div><br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/2/d/2d0866a3dfe34ef5ddb8f306173e200962d53008.jpeg" data-download-href="/uploads/short-url/6qnu4Ib5UNHlZoO5Wl3Wfy2cLt6.jpeg?dl=1" title="signal-2021-08-21-080857 (10)" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/2/2d0866a3dfe34ef5ddb8f306173e200962d53008_2_345x225.jpeg" alt="signal-2021-08-21-080857 (10)" data-base62-sha1="6qnu4Ib5UNHlZoO5Wl3Wfy2cLt6" width="345" height="225" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/2/2d0866a3dfe34ef5ddb8f306173e200962d53008_2_345x225.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/2/2d0866a3dfe34ef5ddb8f306173e200962d53008_2_517x337.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/2/2d0866a3dfe34ef5ddb8f306173e200962d53008_2_690x450.jpeg 2x" data-dominant-color="8B6368"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">signal-2021-08-21-080857 (10)</span><span class="informations">973×637 176 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div><br>
<img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/9/1/91cc1bb1e352dc687ee0963cc5107b93a0d03d9e.jpeg" alt="signal-2021-08-21-080857 (24)" data-base62-sha1="kNMx2McAhJjvstII7tSZ7FLvoh8" width="301" height="163"><br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/f/a/fa62391c9425418d1c3505a09122ba2031d729c1.jpeg" data-download-href="/uploads/short-url/zIZOcapb86H2HnXiuvcgBA2p7eF.jpeg?dl=1" title="signal-2021-08-21-080857 (27)" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/f/fa62391c9425418d1c3505a09122ba2031d729c1_2_345x180.jpeg" alt="signal-2021-08-21-080857 (27)" data-base62-sha1="zIZOcapb86H2HnXiuvcgBA2p7eF" width="345" height="180" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/f/fa62391c9425418d1c3505a09122ba2031d729c1_2_345x180.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/f/fa62391c9425418d1c3505a09122ba2031d729c1_2_517x270.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/f/fa62391c9425418d1c3505a09122ba2031d729c1_2_690x360.jpeg 2x" data-dominant-color="B33438"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">signal-2021-08-21-080857 (27)</span><span class="informations">768×402 134 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div></p>

---

## Post #2 by @lassoan (2021-08-21 03:42 UTC)

<p>This is amazing, thank you for sharing.</p>

---

## Post #3 by @mau_igna_06 (2021-08-21 13:02 UTC)

<p>Hi Manjula. I think our team is great. Thank you logging these results.</p>
<p>I have a few suggestions:</p>
<ul>
<li>change the title of this post to “Mandibular reconstruction surgery made with Slicer’s BoneReconstructionPlanner extension” (or something you like) to make it easier to discover for other surgeons</li>
<li>add a picture of the Virtual Surgical Planning (the reconstructed mandible) and a picture of each surgicalGuide on the Slicer’s 3D-view</li>
<li>to have all logs of surgeries on one place, add a post here: <a href="https://github.com/SlicerIGT/SlicerBoneReconstructionPlanner/discussions/new" rel="noopener nofollow ugc">https://github.com/SlicerIGT/SlicerBoneReconstructionPlanner/discussions/new</a>
</li>
<li>add more details about how the surgicalGuides were printed</li>
</ul>
<p>More info about this <a href="https://github.com/SlicerIGT/SlicerBoneReconstructionPlanner#readme" rel="noopener nofollow ugc">project</a>:</p>
<ul>
<li>
<a class="mention" href="/u/manjula">@manjula</a> will post a videotutorial of use of this extension soon. He’ll add a link here when it’s ready.</li>
<li>A branch adding a feature to plan inmediate dental implants and design custom titanium plates to fix the reconstruction is currently on development. When this is achieved we’ll have the stardard of care on mandibular reconstruction for free on opensource software.</li>
</ul>

---

## Post #4 by @seanchoi0519 (2022-08-11 09:41 UTC)

<p>Dear Manjula,</p>
<p>Thank you for sharing these with us. We’re truly luckty to have this functionality open-source available for free. If you don’t mind, I had a few follow-up questions.<br>
I am currently working with a few surgeons to look into the possibility of creating a similar software, or add to this software’s feature - the functionality of planning a scapula free-flap mandible reconstruction surgery (instead of fibula).</p>
<p>Do you think this is possible (on slicer OR 3d materialise/ProPlan)? How would you tackle this?<br>
Your insight would mean a lot!</p>
<p>Sincerely,</p>
<p>Sean</p>

---

## Post #5 by @manjula (2022-08-11 17:19 UTC)

<aside class="quote no-group" data-username="seanchoi0519" data-post="4" data-topic="19289">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/seanchoi0519/48/10354_2.png" class="avatar"> seanchoi0519:</div>
<blockquote>
<p>s to look into the possibility of creating a similar software, or add to this software’s feature - the functionality of planning a scapula free-flap mandible reconstruction surgery (instead of fibula).</p>
<p>Do you think this is possible (on slicer OR 3d materialise/ProPlan)? How would you tackle this?<br>
Your insight would mean a lot!</p>
</blockquote>
</aside>
<p>Hi Sean,</p>
<p>Thank you for your message and very happy to know that BRP is useful for you and the team.<br>
It is certainly possible to use the Scapula instead of the fibula with BRP.</p>
<p>As it is I think you can do this even now even though I have not tried to do that personally.  I think i remember <a class="mention" href="/u/mau_igna_06">@mau_igna_06</a> saying something about trying this with Scapula or the iliac.</p>
<p>The challenges I see are that,</p>
<ol>
<li>
<p>As it is right with the BRP now is that the cutting will go through the entire width of the scapula uncontrollably. So maybe a way to limit the cut to a certain depth?</p>
</li>
<li>
<p>Generating the cutting guide because of the shape of the scapula could be a challenge except in the lateral border-only segments.</p>
</li>
</ol>
<p>This script by Mauro could be very useful in your workflow.</p>
<aside class="onebox githubgist" data-onebox-src="https://gist.github.com/mauigna06/4345e60f04c74916f159474fb26086fa">
  <header class="source">

      <a href="https://gist.github.com/mauigna06/4345e60f04c74916f159474fb26086fa" target="_blank" rel="noopener nofollow ugc">gist.github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://gist.github.com/mauigna06/4345e60f04c74916f159474fb26086fa" target="_blank" rel="noopener nofollow ugc">https://gist.github.com/mauigna06/4345e60f04c74916f159474fb26086fa</a></h4>

  <h5>transformModel.py</h5>
  <pre><code class="Python">
# This scripts allows you to have a widget placed initially in the model centroid and the 
# direction matching its principal components. Then two modes are possible "Transform mode" 
# and "Local mode" by pressing g key and h key correspondingly.
# You can change the center of rotation by going to Local mode, moving the widget and then 
# returning to Transform mode. This feature that let's move the plane indenpendently of the 
# model on Local mode and then lets you transform it in Transform mode is what makes this 
# feature useful for manual registration.

# Code Starts here</code></pre>
    This file has been truncated. <a href="https://gist.github.com/mauigna06/4345e60f04c74916f159474fb26086fa" target="_blank" rel="noopener nofollow ugc">show original</a>

<p>
</p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>best<br>
manjula</p>

---

## Post #6 by @mau_igna_06 (2022-08-12 21:49 UTC)

<p>Hi. I would be glad to have a meeting in some weeks to talk about this. I’m currently not available</p>
<p>Thank you</p>

---

## Post #7 by @seanchoi0519 (2022-08-17 13:23 UTC)

<p>Thank you Dear Manjula for your guidance<br>
as well as Maruo for offering your help <img src="https://emoji.discourse-cdn.com/twitter/grinning.png?v=12" title=":grinning:" class="emoji" alt=":grinning:" loading="lazy" width="20" height="20"> I am curious whether you were able to achieve the results with scapula as well? (considering the potential difficulties that Manjula has highlighted).</p>
<p>I will try look into this on my own meanwhile - please let me know when you’d be available <img src="https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>

---

## Post #9 by @seanchoi0519 (2022-08-17 15:24 UTC)

<aside class="quote no-group" data-username="manjula" data-post="5" data-topic="19289">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex002/user_avatar/discourse.slicer.org/manjula/48/80981_2.png" class="avatar"> manjula:</div>
<blockquote>
<p>As it is right with the BRP now is that the cutting will go through the entire width of the scapula uncontrollably. So maybe a way to limit the cut to a certain depth?</p>
</blockquote>
</aside>
<p>To clarify, do you mean the cut goes all the way horizontally (medially) instead of just being limited to the lateral border?</p>
<p>Also, if you wouldn’t mind explaining what the transformModel.py script does just briefly in relation to the existing software -</p>
<p>Appreciate your guidance so much!<br>
Thanks a lot</p>

---

## Post #10 by @seanchoi0519 (2022-08-19 11:55 UTC)

<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/7/b/7b01a174616f2f64f3d8f44833e3da5470392422.png" data-download-href="/uploads/short-url/hyadNClHGBmGYXMVli35I0MTQTU.png?dl=1" title="Screen Shot 2022-08-19 at 10.38.26 PM" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/7/b/7b01a174616f2f64f3d8f44833e3da5470392422_2_532x500.png" alt="Screen Shot 2022-08-19 at 10.38.26 PM" data-base62-sha1="hyadNClHGBmGYXMVli35I0MTQTU" width="532" height="500" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/7/b/7b01a174616f2f64f3d8f44833e3da5470392422_2_532x500.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/7/b/7b01a174616f2f64f3d8f44833e3da5470392422_2_798x750.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/7/b/7b01a174616f2f64f3d8f44833e3da5470392422_2_1064x1000.png 2x" data-dominant-color="8E99AF"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Screen Shot 2022-08-19 at 10.38.26 PM</span><span class="informations">1086×1020 73.8 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/9/0/90eef82eebf137a2eef768735b253c21681c5c1f.png" data-download-href="/uploads/short-url/kG8KdyZUcZV447tqmKDBUxypXLp.png?dl=1" title="Screen Shot 2022-08-19 at 10.38.21 PM" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/9/0/90eef82eebf137a2eef768735b253c21681c5c1f_2_476x500.png" alt="Screen Shot 2022-08-19 at 10.38.21 PM" data-base62-sha1="kG8KdyZUcZV447tqmKDBUxypXLp" width="476" height="500" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/9/0/90eef82eebf137a2eef768735b253c21681c5c1f_2_476x500.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/9/0/90eef82eebf137a2eef768735b253c21681c5c1f_2_714x750.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/9/0/90eef82eebf137a2eef768735b253c21681c5c1f.png 2x" data-dominant-color="9291B5"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Screen Shot 2022-08-19 at 10.38.21 PM</span><span class="informations">868×910 68.5 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Here are the results I get with the current code. Looking for ways to control/limit the cut to a certain depth…</p>

---

## Post #11 by @seanchoi0519 (2022-08-28 15:47 UTC)

<p>Dear All,</p>
<p>I have made a bit of progress with the Scapula software - so far I’ve been able to add the planes to the scapula with the script you’ve shared with me <a class="mention" href="/u/manjula">@manjula</a>  (many thanks). I think that because scapula recon is more complex, I think adding plane modification feature to the scapula would be quite useful.<br>
My plans now include allowing live updates to the mandible planes upon changes to the scapula planes, as well as adding a 3rd plane to put a limit to the depth of the cut as previously discussed (~20mm max. cut)</p>
<p>Before I progress further, would you guys have any other advice or guidance for me?<br>
Thanks a lot</p>
<p><a class="mention" href="/u/manjula">@manjula</a> <a class="mention" href="/u/mau_igna_06">@mau_igna_06</a></p>

---

## Post #12 by @mau_igna_06 (2022-09-14 19:53 UTC)

<p>Hi. I’ve been sick and resting.<br>
I would be able to help you in the future</p>

---

## Post #13 by @seanchoi0519 (2022-09-18 06:39 UTC)

<p>No problem Maruo,<br>
Feel better soon, look forward to chatting in the future</p>

---

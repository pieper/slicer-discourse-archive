# Pipelines in 3D Slicer

**Topic ID**: 20107
**Date**: 2021-10-11
**URL**: https://discourse.slicer.org/t/pipelines-in-3d-slicer/20107

---

## Post #1 by @Connor-Bowley (2021-10-11 20:45 UTC)

<p>A new extension, Pipelines, is being developed that will allow for GUI create-able pipelines in 3DSlicer. This extension will have at least two new modules: PipelineCreator and PipelineCaseIterator.</p>
<p><strong>What is a pipeline?</strong> A pipeline for this extension is a module that takes an input (could be a mesh, segmentation, etc), some parameters, and creates an output (possibly the same type as the input, possibly a different type). Pipelines can be built up with other modules (including previously built pipelines!) to create well defined workflows that can be shared with others.</p>
<p><strong>What is the need trying to be filled?</strong> In general, the Pipelines extension is meant to help improve efficiency of dealing with simple workflows. If you find yourself constantly running an input through the same list of modules over and over (e.g. import mesh, convert mesh to labelmap, run algorithm, save labelmap to file), then pipelines is for you. It is also meant to be useful to people that do not have a strong programming background.</p>
<p><strong>What pipelines are not.</strong> Pipelines are not meant to replace the need to code custom modules for more complicated situations. They do not allow generic “coding via GUI”. If you have a complicated workflow that takes multiple meshes as inputs and requires user input for each case (e.g. painting in the segment editor), then Pipelines are not for you.</p>
<p><strong>What modules can I put in a pipeline?</strong> Good question! In general the answer <em>should</em> be any module that takes a single input (a MRML node), some parameters (or not), and gives a single output (also a MRML node). In reality however, there are going to be modules that fit that description, but are not setup to work with the Pipeline infrastructure. The first modules likely to be put into the Pipelines infrastructure as part of the initial development are the Surface Toolbox, Mesh To Label Map, and SegPostProcess. The design as outline below allows for existing modules to be updated or wrapped to fit the interface the PipelineCreator will be used. This will likely happen to other existing modules over time.</p>
<p><strong>Module Descriptions:</strong></p>
<ol>
<li>PipelineCreator</li>
</ol>
<p>The Pipeline Creator is a module of 3DSlicer that will offer the ability to create pipelines via a GUI interface with no coding knowledge needed.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/d/4/d468943743cd9930cead497910db737098d4fad5.png" data-download-href="/uploads/short-url/uj3hyow7AQ6Fy4DPLLo8fSYksy9.png?dl=1" title="PipelineCreatorDesign" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/d/4/d468943743cd9930cead497910db737098d4fad5_2_682x500.png" alt="PipelineCreatorDesign" data-base62-sha1="uj3hyow7AQ6Fy4DPLLo8fSYksy9" width="682" height="500" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/d/4/d468943743cd9930cead497910db737098d4fad5_2_682x500.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/d/4/d468943743cd9930cead497910db737098d4fad5_2_1023x750.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/d/4/d468943743cd9930cead497910db737098d4fad5.png 2x" data-dominant-color="F9F7F3"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">PipelineCreatorDesign</span><span class="informations">1124×823 71.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Above is the architectural design of the PipelineCreator. The Pipeline Creator Module will work with any module that implements the PipelineSelectableModule interface. Modules may choose to implement this directly, or wrapper classes may be used (such as when changing original source is not possible or undesired). For convenience, a JSON based wrapper generator will likely be implemented to allow for easier wrapper creation for existing simple modules (such as many of the VTK filters). Wrappers for VTK filters or other modules may be written manually if desired. Note: the diagram is at a high level and some of the function signatures/names may change during implementation.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/b/9/b928a7f161e63c97b5fb690de72fa57e3bbe386a.png" data-download-href="/uploads/short-url/qpZr6tDtJ9YNKQOiCsIVjEcfyT8.png?dl=1" title="PipelineModuleMockup" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/b/b928a7f161e63c97b5fb690de72fa57e3bbe386a_2_344x500.png" alt="PipelineModuleMockup" data-base62-sha1="qpZr6tDtJ9YNKQOiCsIVjEcfyT8" width="344" height="500" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/b/b928a7f161e63c97b5fb690de72fa57e3bbe386a_2_344x500.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/b/9/b928a7f161e63c97b5fb690de72fa57e3bbe386a.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/b/9/b928a7f161e63c97b5fb690de72fa57e3bbe386a.png 2x" data-dominant-color="E7E7E7"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">PipelineModuleMockup</span><span class="informations">447×649 45.8 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>This is the general UI for creating pipelines. A list of modules is created where one module feeds into the next. Each module in the pipeline knows what its input and output types are, and these are told to the PipelineCreator module via the PipelineSelectableModule interface methods. For convenience for the user, during the creation of the pipeline, it will allow modules to be added, deleted, and moved up and down. Doing this may at times cause the output of one module to not match the input of the next module. If this happens, the mismatched output and input boxes will be colored red to indicate that there is a problem, and if the finalize button is clicked, an error will occur. If the type of all outputs and inputs are matched, the finalize button will initiate the creation of the new module. At any time the user may press the clear button to start from scratch. A popup confirmation window will appear to ensure the user didn’t accidentally press clear when trying to finalize. Pressing the prepend/insert/append buttons will cause the Select Module window to pop up.</p>
<p><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/5/c/5c24c070e38d87fbdf853917ca92c3108066983c.png" alt="SelectModule" data-base62-sha1="d98FnO3NqwIJnb0kSdGLKQkXUD2" width="400" height="336"></p>
<p>This is UI for selecting a module to insert into the pipeline. The input type is selectable and will default to the output type of the directly above the button pressed (if any). When a user selects a module in the module selection widget, the output type read only text box will be populated with the output type of the selected module. Clicking OK will close the pop up and insert the selected module into the Pipeline Creator module. Clicking Cancel will close the pop up window and return to the Pipeline Creator module without making any changes.</p>
<ol start="2">
<li>PipelineCaseIterator</li>
</ol>
<p>The second module that will be added the PipelineCaseIterator, which will allow for running pipelines over a set of files (aka cases) in a directory. This module’s main purpose is to allow easy batch processing when you need to run a pipeline over many independent inputs.</p>
<p><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/c/6/c6d8976fcdb64b15edbf4afac0dc15cb47183426.png" alt="PipelineCaseIteratorModuleMockup" data-base62-sha1="sn4AerQTRCq6PbRA0tih9YHxxUG" width="400" height="285"></p>
<p><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/a/2/a2a19fb05a924d456bc332919e982bf7c7e5f0a7.png" alt="PipelineCaseIteratorModuleRunningMockup" data-base62-sha1="ncHCUoyP7MSMcJ5rYZGpQWpAf79" width="400" height="285"></p>
<p>Thanks for reading! I know this was a little bit longer post. Please feel free to provide any feedback on the design or reach out with questions.</p>

---

## Post #2 by @muratmaga (2023-09-19 16:57 UTC)

<p>What is the situation of this extension? The documentation/instructions and the interface in the latest stable doesn’t seem to match.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/c/d/cd7e95c09a46eda5204b79cb9057f21756c34ded.png" data-download-href="/uploads/short-url/tjT5u9ABXDsZ19OgTjImEIL5bel.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/d/cd7e95c09a46eda5204b79cb9057f21756c34ded_2_358x500.png" alt="image" data-base62-sha1="tjT5u9ABXDsZ19OgTjImEIL5bel" width="358" height="500" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/d/cd7e95c09a46eda5204b79cb9057f21756c34ded_2_358x500.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/d/cd7e95c09a46eda5204b79cb9057f21756c34ded_2_537x750.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/d/cd7e95c09a46eda5204b79cb9057f21756c34ded_2_716x1000.png 2x" data-dominant-color="E9E8E8"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">982×1370 90.7 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>

---

## Post #3 by @Harald_Scheirich (2023-09-19 20:24 UTC)

<p>We just (yesterday) merged an update into the git repository, i don’t know when the registry will be updated, it’s a python module that you could install from the repository</p>

---

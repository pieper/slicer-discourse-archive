# Issue importing TCIA Dicom files

**Topic ID**: 33293
**Date**: 2023-12-08
**URL**: https://discourse.slicer.org/t/issue-importing-tcia-dicom-files/33293

---

## Post #1 by @dub2s (2023-12-08 04:10 UTC)

<p>Hii all</p>
<p>I am having trouble importing DICOM folders from a TCIA study. For example, when I import a folder of DICOM files into the DICOM database using drag and drop and then double click on it, I see it being opened as multiple files -</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/2/8/281ed332e414e3cde72d54e766b8d6e0747ad7f3.png" data-download-href="/uploads/short-url/5IV8KfVhQcyblxdoqMlgyq7tsbh.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/2/8/281ed332e414e3cde72d54e766b8d6e0747ad7f3_2_690x286.png" alt="image" data-base62-sha1="5IV8KfVhQcyblxdoqMlgyq7tsbh" width="690" height="286" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/2/8/281ed332e414e3cde72d54e766b8d6e0747ad7f3_2_690x286.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/2/8/281ed332e414e3cde72d54e766b8d6e0747ad7f3_2_1035x429.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/2/8/281ed332e414e3cde72d54e766b8d6e0747ad7f3.png 2x" data-dominant-color="929297"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1117×463 66 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>I also tried using “DICOM Patcher” Module but that also did not correct this issue -</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/f/5/f56de7ec074cf4ee538d28802e6759615eb8ab56.png" data-download-href="/uploads/short-url/z1as41Y6809qlrMXvKe7bJ1qWLI.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/f/5/f56de7ec074cf4ee538d28802e6759615eb8ab56_2_690x291.png" alt="image" data-base62-sha1="z1as41Y6809qlrMXvKe7bJ1qWLI" width="690" height="291" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/f/5/f56de7ec074cf4ee538d28802e6759615eb8ab56_2_690x291.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/f/5/f56de7ec074cf4ee538d28802e6759615eb8ab56_2_1035x436.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/f/5/f56de7ec074cf4ee538d28802e6759615eb8ab56.png 2x" data-dominant-color="939297"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1121×473 67.6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>I tried importing the same DICOM folder into “RadiANT DICOM Viewer” where I could still visualize it with the warning “Slice interval is not regular”</p>
<p>The DICOM folder could be accessed at <a href="https://drive.google.com/file/d/17LJrTA3nILuF2XAhiKJRYVUDKX1_YMF4/view?usp=sharing" class="inline-onebox" rel="noopener nofollow ugc">3.000000-Recon 2 Routine Head-93888.zip - Google Drive</a></p>

---

## Post #2 by @pieper (2023-12-08 15:27 UTC)

<p>Thanks for reporting this - it’s an important case to illustrate some of the complexities of working with clinical dicom data that comes from different scanners and modalities with different assumptions.</p>
<p>In this case Slicer has by default separated the series into different volumes based on the AcquititionNumber field in the dicom header.  Often this is the desired option because some scans use that header to indicate something like a different time point or contrast.</p>
<p>In this case though the acquisitions correspond to regions with different slice spacing, which was probably done to optimize the detail in the important parts of the head while minimizing time spent and radiation dose in other parts of the head.</p>
<p>So you want to override Slicer’s default by going into the advanced mode and selecting the option to load all the acquisitions as a single volume like this:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/e/4/e463270cfc05303a75f5972ee7ad34dbea5a521b.png" data-download-href="/uploads/short-url/wApio8WNDRniSWLakvs3mNcgsTV.png?dl=1" title="image"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/e/4/e463270cfc05303a75f5972ee7ad34dbea5a521b_2_690x128.png" alt="image" data-base62-sha1="wApio8WNDRniSWLakvs3mNcgsTV" width="690" height="128" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/e/4/e463270cfc05303a75f5972ee7ad34dbea5a521b_2_690x128.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/e/4/e463270cfc05303a75f5972ee7ad34dbea5a521b_2_1035x192.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/e/4/e463270cfc05303a75f5972ee7ad34dbea5a521b_2_1380x256.png 2x" data-dominant-color="EDEDED"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1878×350 22 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>(note the Uncheck All button to simplify the operation).</p>
<p>Also note the message that the slices are not regularly spaced.  If you load the volume Slicer will add an AcquisitionTransform, which is a nonlinear transform to normalize the geometry of the scan to correct patient space and compensate for the variable spacing of the acquisition.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/0/7/077ad5f99e8cda1554e38922ff97c3d8bd1de1cd.jpeg" data-download-href="/uploads/short-url/14aw2PQS8aC0WOQXqFATB3WD7op.jpeg?dl=1" title="image"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/0/7/077ad5f99e8cda1554e38922ff97c3d8bd1de1cd_2_690x303.jpeg" alt="image" data-base62-sha1="14aw2PQS8aC0WOQXqFATB3WD7op" width="690" height="303" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/0/7/077ad5f99e8cda1554e38922ff97c3d8bd1de1cd_2_690x303.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/0/7/077ad5f99e8cda1554e38922ff97c3d8bd1de1cd_2_1035x454.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/0/7/077ad5f99e8cda1554e38922ff97c3d8bd1de1cd_2_1380x606.jpeg 2x" data-dominant-color="BDBCC1"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1920×844 107 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>If you turn off the transform the head is squashed at top and measurements would be inaccurate:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/c/f/cf50ede71650c95f38c4a0a47b32b463e67acfef.jpeg" data-download-href="/uploads/short-url/tA0e38UTA5oYZrKrNZ8cndjaiYv.jpeg?dl=1" title="image"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/f/cf50ede71650c95f38c4a0a47b32b463e67acfef_2_690x262.jpeg" alt="image" data-base62-sha1="tA0e38UTA5oYZrKrNZ8cndjaiYv" width="690" height="262" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/f/cf50ede71650c95f38c4a0a47b32b463e67acfef_2_690x262.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/f/cf50ede71650c95f38c4a0a47b32b463e67acfef_2_1035x393.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/f/cf50ede71650c95f38c4a0a47b32b463e67acfef_2_1380x524.jpeg 2x" data-dominant-color="A8A8A6"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1920×731 64.2 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>You can use the Harden option to resample the image data to be a regular grid, as many image processing operations expect.  For example, Slicer’s volume rendering only works on the hardened version of this scan.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/9/39e35737917bc27e7b86752cf04d7207ee8d2fbe.jpeg" data-download-href="/uploads/short-url/8g6i2BI1OWZoWbkL4jw0mz4Lir4.jpeg?dl=1" title="image"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/9/39e35737917bc27e7b86752cf04d7207ee8d2fbe_2_690x432.jpeg" alt="image" data-base62-sha1="8g6i2BI1OWZoWbkL4jw0mz4Lir4" width="690" height="432" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/9/39e35737917bc27e7b86752cf04d7207ee8d2fbe_2_690x432.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/9/39e35737917bc27e7b86752cf04d7207ee8d2fbe_2_1035x648.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/9/39e35737917bc27e7b86752cf04d7207ee8d2fbe_2_1380x864.jpeg 2x" data-dominant-color="7A6868"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1866×1170 102 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Here you can visually see the effect of the variable spacing in the rendering.</p>

---

## Post #3 by @dub2s (2023-12-08 22:11 UTC)

<p>Thanks a lot for the detailed explanations and the solution.</p>

---

# Improving Skeleton and Organ Segmentation Using Python and TotalSegmentator

**Topic ID**: 30487
**Date**: 2023-07-10
**URL**: https://discourse.slicer.org/t/improving-skeleton-and-organ-segmentation-using-python-and-totalsegmentator/30487

---

## Post #1 by @Utku_Gul (2023-07-10 07:26 UTC)

<p>Hello everyone,</p>
<p>I have written a code in Python that automatically loads patient Dicom data and then exports the skeleton and organs as OBJ files using TotalSegmentator. Although the results from this process do not look bad when viewed as a whole skeleton, I have encountered some incorrect outputs in certain parts.</p>
<p>Examples of incorrect outputs include:</p>
<p>Instead of a single vertebra, there are separate parts appearing. When I checked in Slicer, I couldn’t see any issues with the raw data in these areas.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/c/b/cb6ed234d7e0717ad1932a6c925fdd3ad078f855.jpeg" data-download-href="/uploads/short-url/t1EmivqEJwGi301XSq92BI8U0EB.jpeg?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/b/cb6ed234d7e0717ad1932a6c925fdd3ad078f855_2_690x353.jpeg" alt="image" data-base62-sha1="t1EmivqEJwGi301XSq92BI8U0EB" width="690" height="353" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/b/cb6ed234d7e0717ad1932a6c925fdd3ad078f855_2_690x353.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/c/b/cb6ed234d7e0717ad1932a6c925fdd3ad078f855.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/c/b/cb6ed234d7e0717ad1932a6c925fdd3ad078f855.jpeg 2x" data-dominant-color="E7E5E3"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">780×400 43.7 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Additionally, there are fractures appearing on some parts of the bones. Again, these are not observed when examining the raw data.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/1/31e1c03ec390dce5701354528558d4897067eaf2.jpeg" data-download-href="/uploads/short-url/77h42OtDhKj4cc42rTUpcxwmPTA.jpeg?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/1/31e1c03ec390dce5701354528558d4897067eaf2_2_690x411.jpeg" alt="image" data-base62-sha1="77h42OtDhKj4cc42rTUpcxwmPTA" width="690" height="411" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/1/31e1c03ec390dce5701354528558d4897067eaf2_2_690x411.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/1/31e1c03ec390dce5701354528558d4897067eaf2.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/1/31e1c03ec390dce5701354528558d4897067eaf2.jpeg 2x" data-dominant-color="D0CFCD"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">792×472 50 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Do you have any suggestions to achieve better results and overcome these kinds of issues? The first solution that comes to mind is creating a more detailed dataset through interpolation on the raw data, which may yield better results, but it could also prolong the process.</p>
<p>PC specifications used: Nvidia RTX 4070Ti and Ryzen 5 5600x</p>
<p>Code used:</p>
<p>During the data loading stage:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/4/e/4edef2bfbf04de030a5af5fa016323b3da4ff4e4.png" data-download-href="/uploads/short-url/bfIUeRzMlwKhEhy7vTGdVpvmBms.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/4/e/4edef2bfbf04de030a5af5fa016323b3da4ff4e4_2_690x179.png" alt="image" data-base62-sha1="bfIUeRzMlwKhEhy7vTGdVpvmBms" width="690" height="179" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/4/e/4edef2bfbf04de030a5af5fa016323b3da4ff4e4_2_690x179.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/4/e/4edef2bfbf04de030a5af5fa016323b3da4ff4e4.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/4/e/4edef2bfbf04de030a5af5fa016323b3da4ff4e4.png 2x" data-dominant-color="292A2A"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">777×202 48.8 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>During the export of data as OBJ:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/1/c/1c9a79e10c4615d2500b72af6e791e92e7c09d29.png" data-download-href="/uploads/short-url/452kCMrHOhTYIqghHlvxD1iBDXH.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/1/c/1c9a79e10c4615d2500b72af6e791e92e7c09d29_2_690x38.png" alt="image" data-base62-sha1="452kCMrHOhTYIqghHlvxD1iBDXH" width="690" height="38" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/1/c/1c9a79e10c4615d2500b72af6e791e92e7c09d29_2_690x38.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/1/c/1c9a79e10c4615d2500b72af6e791e92e7c09d29.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/1/c/1c9a79e10c4615d2500b72af6e791e92e7c09d29.png 2x" data-dominant-color="333535"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">780×44 19.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>I would be very grateful for any help you can provide.</p>
<p>Thank you.</p>

---

---
topic_id: 10268
title: "Saved Pial Surface Model Reloads As Invalid"
date: 2020-02-14
url: https://discourse.slicer.org/t/10268
---

# Saved pial surface model reloads as invalid

**Topic ID**: 10268
**Date**: 2020-02-14
**URL**: https://discourse.slicer.org/t/saved-pial-surface-model-reloads-as-invalid/10268

---

## Post #1 by @mikebind (2020-02-14 21:59 UTC)

<p>Hello, I use FreeSurfer to generate cortical surface models from a brain MR volume (outside of Slicer).  Slicer can load the resulting surface files (lh.pial and rh.pial) as models and they seem to function as normal models within Slicer, including a log message like</p>
<pre><code>"Model" Reader has successfully read the file "C:/DockerTest/freesurfer_subjects/GGNonCon/surf/rh.pial" "[0.23s]". 
</code></pre>
<p>I can interact with the imported models in all the ways I want to, change color, transparency, apply transforms, etc.  However, when I save them to file, they are given a .vtk extension (rh.vtk and lh.vtk), and when I next try to load them into Slicer, they come in as invalid models and do not display, with the following error message appearing in the log:</p>
<pre><code>vtkFSSurfaceReader.cxx Execute: Wrong file type when loading C:/Users/mikeb/Documents/Neuro/Testing/PialSaveReload/rh.vtk
 magic number = 2302070. Supported ar 16777215, 16777213, and 16777214
</code></pre>
<p>This happens any time I try to save and reload these surface files. Re-importing from the original pial surface files generated by FreeSurfer works fine, but this error makes it impossible to regenerate the application state by saving and loading a MRML scene.</p>
<p>I’m running 4.11.0-2020-01-08 on Windows.</p>
<p>Expected behavior: Imported FreeSurfer surfaces should reload into Slicer after being saved as .vtk models.</p>
<p>Actual behavior: Saved .vtk models of FreeSurfer surfaces reload as !InvalidModel.</p>

---

## Post #2 by @lassoan (2020-02-14 22:21 UTC)

<p><a class="mention" href="/u/sunderlandkyl">@Sunderlandkyl</a> what would you recommend?</p>

---

## Post #3 by @Sunderlandkyl (2020-02-15 01:55 UTC)

<p>I’ve made a pull request for a workaround here: <a href="https://github.com/Slicer/Slicer/pull/1325" rel="nofollow noopener">https://github.com/Slicer/Slicer/pull/1325</a></p>
<p>No write functions have been implemented for the FreeSurferModel storage node, so the storage node falls back on the parent implementation to save the node as a vtk.</p>

---

## Post #4 by @mikebind (2020-02-17 15:57 UTC)

<p>Thanks!  How can I tell if/when this has been incorporated into a nightly build for Windows?</p>

---

## Post #5 by @lassoan (2020-02-17 16:02 UTC)

<p>It is not integrated yet. Let’s discuss it in the pull request.</p>

---

## Post #6 by @mikebind (2020-02-17 16:03 UTC)

<p>OK, I’ll switch over to there. Thanks</p>

---

## Post #7 by @Sam_Horvath (2020-02-17 18:33 UTC)

<p><a class="mention" href="/u/mikebind">@mikebind</a> The workaround has been merged, and should be available in tomorrow’s installer.  Thanks <a class="mention" href="/u/sunderlandkyl">@Sunderlandkyl</a> !</p>

---

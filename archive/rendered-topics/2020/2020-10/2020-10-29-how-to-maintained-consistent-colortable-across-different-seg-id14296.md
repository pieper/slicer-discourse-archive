---
topic_id: 14296
title: "How To Maintained Consistent Colortable Across Different Seg"
date: 2020-10-29
url: https://discourse.slicer.org/t/14296
---

# How to maintained consistent colortable across different segmentation annotation

**Topic ID**: 14296
**Date**: 2020-10-29
**URL**: https://discourse.slicer.org/t/how-to-maintained-consistent-colortable-across-different-segmentation-annotation/14296

---

## Post #1 by @ButuiHu (2020-10-29 02:01 UTC)

<p>I have a lot of segmentation annotation exported from 3dslicer. But the label value is not consistent. So I would like to do some data clean. I got <code>.seg.nrrd</code> (segmentation file export from 3dslicer), <code>.ctbl</code> (color table), and <code>-label.nrrd</code> (labelmap file export from 3dslicer) for each input image. I check <code>seg.nrrd</code>'s metadatakeys, and I notice that there are keys:</p>
<pre><code class="lang-auto">Segment0_Color
Segment0_ColorAutoGenerated
Segment0_ID
Segment0_Name
Segment0_NameAutoGenerated
</code></pre>
<p>So I could simply update these keys, and the data (converted to numpy array, remap to correct label value, and then convert back to nrrd) according to the <code>.ctbl</code> file. Is that OK?<br>
Then I found this <a href="https://discourse.slicer.org/t/how-to-automatically-convert-a-labelmap-volume-to-a-segmentation-node-upon-loading-labelmap-volume/9931/9">post</a>. I only need to update the labelmap file (<code>-label.nrrd</code>) file. Am I right? Maybe 3dslicer could merge <code>.seg.nrrd</code> &amp; <code>-label.nrrd</code> to save space.</p>
<p>For now, our workflow:</p>
<ol>
<li>load data</li>
<li>switch to Segment Editor module, add Segment</li>
<li>switch to Segmentations module, export segmentation to Labelmap</li>
<li>save files, including Segmentation (<code>.seg.nrrd</code>), label map (<code>-label.nrrd</code>), and Color Table (<code>.ctbl</code>).</li>
<li>close scene, and restart from step 1 for the next input image.</li>
</ol>
<p>In step 2, we have 3 classes, but there might only be one class, so the user would only add one class, and set the proper class name. I think thatâ€™s why we got an inconsistent color table. Any suggestions to improve this workflow?</p>

---

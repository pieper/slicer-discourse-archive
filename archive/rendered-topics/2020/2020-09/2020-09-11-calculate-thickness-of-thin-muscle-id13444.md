---
topic_id: 13444
title: "Calculate Thickness Of Thin Muscle"
date: 2020-09-11
url: https://discourse.slicer.org/t/13444
---

# Calculate thickness of thin muscle

**Topic ID**: 13444
**Date**: 2020-09-11
**URL**: https://discourse.slicer.org/t/calculate-thickness-of-thin-muscle/13444

---

## Post #1 by @lmach (2020-09-11 17:42 UTC)

<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/f/a/fa42ad9e73a2e539bc2cc575a90ff27ad4293559.png" data-download-href="/uploads/short-url/zHUdWSzivBz9wUDcu1KOoT2DWid.png?dl=1" title="thickness_all3steps" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/f/a/fa42ad9e73a2e539bc2cc575a90ff27ad4293559_2_689x480.png" alt="thickness_all3steps" data-base62-sha1="zHUdWSzivBz9wUDcu1KOoT2DWid" width="689" height="480" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/f/a/fa42ad9e73a2e539bc2cc575a90ff27ad4293559_2_689x480.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/f/a/fa42ad9e73a2e539bc2cc575a90ff27ad4293559_2_1033x720.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/f/a/fa42ad9e73a2e539bc2cc575a90ff27ad4293559.png 2x" data-dominant-color="2C211F"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">thickness_all3steps</span><span class="informations">1292×899 166 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Hi!</p>
<p>I want to measure the thickness/distance between the inner and outer boundary of a muscle that I have segmented. I have followed the workflow from this link: <a href="https://discourse.slicer.org/t/how-to-analyze-the-thickness-of-the-model/2735" class="inline-onebox">How to analyze the thickness of the model</a></p>
<p>Now, I am not sure of how to interpret my result… Does the different colours illustrate different thicknesses, e.g. the red color is the thickest and the blur color is the thinnest?</p>
<p>I also want to know the specific thickness (as a value, not a colour) in a certain position in the muscle, how can I achieve this?</p>
<p>Thanks in advance!</p>

---

## Post #2 by @lassoan (2020-09-11 19:35 UTC)

<p>Coloring does not seem to correspond to thickness.</p>
<p>Which method did you try? (several workflows are described in the referenced page)</p>
<p>If you compute a skeleton labelmap: Since the segmented structure is very thin compared to its extent, you probably need to use a finer resolution labelmap than the one generated by default.</p>
<p>You may also give VMTK extension’s centerline extraction a try (as a preprocessing step, it extracts Voronoi diagram, which is a kind of medial surface and its thickness).</p>
<p>You can get numerical reading from values associated with scalar points with a short Python code snippet as shown <a href="https://www.slicer.org/wiki/Documentation/Nightly/ScriptRepository#Get_scalar_values_at_surface_of_a_model">here</a>.</p>

---

## Post #3 by @lmach (2020-09-14 10:48 UTC)

<p>Thanks for your reply, and sorry for the unclearness. I tried your described workflow here:</p><aside class="quote quote-modified" data-post="2" data-topic="2735">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/lassoan/48/13_2.png" class="avatar">
    <a href="https://discourse.slicer.org/t/how-to-analyze-the-thickness-of-the-model/2735/2">How to analyze the thickness of the model</a> <a class="badge-category__wrapper " href="/c/support/11"><span data-category-id="11" style="--category-badge-color: #3AB54A; --category-badge-text-color: #FFFFFF;" data-drop-close="true" class="badge-category " title="The Support category is for all usage questions and general discussion of Slicer and extensions."><span class="badge-category__name">Support</span></span></a>
  </div>
  <blockquote>
    “Thickness” is not a very well defined term for models (surface meshes), but for shell-like meshes it is probably not too difficult to estimate it robustly and accurately. 
Potential approaches: 
A. Extract medial surface and estimate thickness as 2x of distance from medial surface. There are various ways of computing these in Slicer. One possible workflow: 

Compute medial surface using Simple Filters module - BinaryThinningImageFilter.
Compute distance map using Simple Filters module - Daniels…
  </blockquote>
</aside>

<p>And since I followed your method, I got similar results as in your example, except for the thin green line that your example has but not mine… I suppose that is the actual medial surface? If so, what does the colours red, green and blue illustrate?</p>
<p>I will look into your tips, thanks!</p>

---

## Post #4 by @lmach (2020-09-16 06:47 UTC)

<p>Hi, I am still trying to figuring out what my result of your workflow (<a href="https://discourse.slicer.org/t/how-to-analyze-the-thickness-of-the-model/2735/2" class="inline-onebox">How to analyze the thickness of the model</a>) means… What does the colours mean and how do I get the exact medial surface (that I assume is the thin green line in your example) ?</p>
<p>I am also trying to compute a skeleton labelmap, but I can’t find it in “Representations” under Segmentations-module, even if I have installed SlicerRT to get additional representations. How can I add this skeleton labelmap?</p>
<p>Thanks!</p>

---

## Post #5 by @lassoan (2020-09-21 04:42 UTC)

<aside class="quote no-group" data-username="lmach" data-post="3" data-topic="13444">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://avatars.discourse-cdn.com/v4/letter/l/ecae2f/48.png" class="avatar"> lmach:</div>
<blockquote>
<p>except for the thin green line that your example has but not mine… I suppose that is the actual medial surface?</p>
</blockquote>
</aside>
<p>The green points are voxels of the skeletonized labelmap, which are indeed points of the medial surface (points that are at the same distance from nearest boundary points). You can show them by displaying the “Extract skeleton” module’s “Output Image” in a slice view.</p>

---

## Post #6 by @lmach (2020-09-22 10:04 UTC)

<p>Thanks for your reply, I sort of managed to get the skeleton but I do not get a complete curve of the skeleton (I just get these dots) with these parameters in “Extract skeleton” module:<br>
Skeleton type: 1D<br>
Do not prune branches: yes<br>
Number of points: 9000000</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/e/d/edd7b9ee8d4123d939b06eeaf3f112c4b300e608.png" data-download-href="/uploads/short-url/xW3lOUCQL1BkIhzRPNQeJdYOg40.png?dl=1" title="thickness_skeleton" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/e/d/edd7b9ee8d4123d939b06eeaf3f112c4b300e608_2_516x360.png" alt="thickness_skeleton" data-base62-sha1="xW3lOUCQL1BkIhzRPNQeJdYOg40" width="516" height="360" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/e/d/edd7b9ee8d4123d939b06eeaf3f112c4b300e608_2_516x360.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/e/d/edd7b9ee8d4123d939b06eeaf3f112c4b300e608_2_774x540.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/e/d/edd7b9ee8d4123d939b06eeaf3f112c4b300e608_2_1032x720.png 2x" data-dominant-color="2D2A32"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">thickness_skeleton</span><span class="informations">1292×899 88 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>How do I get a complete curve?<br>
And if I achieve this curve, how do I get the thickness in your described way?<br>
You mentioned:</p>
<aside class="quote no-group" data-username="lassoan" data-post="2" data-topic="2735">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/lassoan/48/13_2.png" class="avatar"><a href="https://discourse.slicer.org/t/how-to-analyze-the-thickness-of-the-model/2735/2">How to analyze the thickness of the model</a></div>
<blockquote>
<p>Extract medial surface and estimate thickness as 2x of distance from medial surface</p>
</blockquote>
</aside>
<p>Am I supposed to use the Ruler and just measure the distance, or is there a more accurate way to measure the thickness?</p>

---

## Post #7 by @lmach (2020-09-20 16:08 UTC)

<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/f/a/fa42ad9e73a2e539bc2cc575a90ff27ad4293559.png" data-download-href="/uploads/short-url/zHUdWSzivBz9wUDcu1KOoT2DWid.png?dl=1" title="thickness_all3steps" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/f/a/fa42ad9e73a2e539bc2cc575a90ff27ad4293559_2_689x480.png" alt="thickness_all3steps" data-base62-sha1="zHUdWSzivBz9wUDcu1KOoT2DWid" width="689" height="480" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/f/a/fa42ad9e73a2e539bc2cc575a90ff27ad4293559_2_689x480.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/f/a/fa42ad9e73a2e539bc2cc575a90ff27ad4293559_2_1033x720.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/f/a/fa42ad9e73a2e539bc2cc575a90ff27ad4293559.png 2x" data-dominant-color="2C211F"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">thickness_all3steps</span><span class="informations">1292×899 166 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Hi, I have previously posted a question about how to measure the thickness (<a href="https://discourse.slicer.org/t/calculate-thickness-of-thin-muscle/13444" class="inline-onebox">Calculate thickness of thin muscle</a>) but did not come to any solution. I have followed this workflow: <a href="https://discourse.slicer.org/t/how-to-analyze-the-thickness-of-the-model/2735/2" class="inline-onebox">How to analyze the thickness of the model - #2 by lassoan</a> and I got the result as in the attached image. It seems like the inner and outer boundary are colored, but where is the medial surface? I need it so that I can measure the thickness (distance between inner and outer boundary) of this segment. After following the workflow, what does the colors indicate?</p>
<p>Thanks in advance!</p>

---

## Post #8 by @lassoan (2020-09-21 04:54 UTC)

<p>If you just need surface thickness then using the method described <a href="https://discourse.slicer.org/t/how-to-analyze-the-thickness-of-the-model/2735/2">here</a> should work (probably you just need to increase resolution of your distance map).</p>
<p>If you need medial surface then there are a few options, for example:</p>
<ul>
<li>you can get approximate medial surface (Voronoi diagram) from “Extract Centerline” module in <a href="https://github.com/vmtk/SlicerExtension-VMTK">SlicerVMTK extension</a>
</li>
<li>try S-reps in SlicerSalt extension: see <a href="https://salt.slicer.org/documentation/">this page</a>, for tutorial on “<a href="http://bit.ly/30MiJ6v">Shape analysis via skeletal models</a>”</li>
</ul>

---

## Post #9 by @lmach (2020-09-22 11:29 UTC)

<aside class="quote no-group" data-username="lassoan" data-post="8" data-topic="13444">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/lassoan/48/13_2.png" class="avatar"> lassoan:</div>
<blockquote>
<p>If you just need surface thickness then using the method described <a href="https://discourse.slicer.org/t/how-to-analyze-the-thickness-of-the-model/2735/2">here </a> should work (probably you just need to increase resolution of your distance map).</p>
</blockquote>
</aside>
<p>Yes, that is the exact method that I have used and what is shown in the image in my first post.</p>
<p>Now I want to get a value of the thickness, which I tried to do with your suggestion:</p>
<aside class="quote no-group" data-username="lassoan" data-post="2" data-topic="13444">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/lassoan/48/13_2.png" class="avatar"> lassoan:</div>
<blockquote>
<p>You can get numerical reading from values associated with scalar points with a short Python code snippet as shown <a href="https://www.slicer.org/wiki/Documentation/Nightly/ScriptRepository#Get_scalar_values_at_surface_of_a_model" rel="noopener nofollow ugc">here </a>.</p>
</blockquote>
</aside>
<p>And I got these values:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/8/a/8aae523eec86fc2aa3ad94b62b81ed5f15d90a2c.png" data-download-href="/uploads/short-url/jMPn5ZpeXqiZInzmCneMj1DEpB2.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/8/8aae523eec86fc2aa3ad94b62b81ed5f15d90a2c_2_690x388.png" alt="image" data-base62-sha1="jMPn5ZpeXqiZInzmCneMj1DEpB2" width="690" height="388" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/8/8aae523eec86fc2aa3ad94b62b81ed5f15d90a2c_2_690x388.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/8/8aae523eec86fc2aa3ad94b62b81ed5f15d90a2c_2_1035x582.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/8/8aae523eec86fc2aa3ad94b62b81ed5f15d90a2c_2_1380x776.png 2x" data-dominant-color="726D71"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1920×1080 333 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>The values does not make sense; there are three values and some of them are negative. I just thought I would get exact one value for the thickness? How are the printed values related to the thickness?</p>
<p>Thanks for the help!</p>

---

## Post #10 by @lassoan (2020-09-22 12:13 UTC)

<p>Your mesh can contain many different arrays associated with points and cells. The <a href="https://www.slicer.org/wiki/Documentation/Nightly/ScriptRepository#Get_scalar_values_at_surface_of_a_model">example</a> prints out surface normal direction - see this line:</p>
<pre><code class="lang-auto">...
modelPointValues = modelNode.GetPolyData().GetPointData().GetArray("Normals")
...
</code></pre>
<p>If you want to print the surface thickness, change <code>Normals</code> to the array name that contains distance. You can see list of available arrays in Models module / Display / Scalars / Active Scalar.</p>

---

## Post #11 by @lmach (2020-09-22 12:58 UTC)

<p>Thank you very much for your help, I changed the array name to what I think contains the distance (array name:“ImageScalars”) and now the values makes more sense. However, I am not sure if the printed value is the actual thickness. If I move the cursor in range A, then then value is 6.7 and if the cursor is in range B, then the value is 7.4. None of these values are close to the actual distance, which I measure with the Ruler to be 0.8811mm.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/e/5/e5e4537dd6bbefe10a5332638d0b178cb5191d95.png" data-download-href="/uploads/short-url/wNIwGFvxW2pMiWhLDmKRYjWebtj.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/e/e5e4537dd6bbefe10a5332638d0b178cb5191d95_2_690x388.png" alt="image" data-base62-sha1="wNIwGFvxW2pMiWhLDmKRYjWebtj" width="690" height="388" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/e/e5e4537dd6bbefe10a5332638d0b178cb5191d95_2_690x388.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/e/e5e4537dd6bbefe10a5332638d0b178cb5191d95_2_1035x582.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/e/e5e4537dd6bbefe10a5332638d0b178cb5191d95_2_1380x776.png 2x" data-dominant-color="746D73"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1920×1080 315 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Do you have any idea why these values are so off from the measured distance? Is it correct if range A is the distance between the medial surface to outer boundary while range B is the distance between the medial surface and the inner boundary?</p>

---

## Post #12 by @lassoan (2020-09-22 22:06 UTC)

<aside class="quote no-group" data-username="lmach" data-post="11" data-topic="13444">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://avatars.discourse-cdn.com/v4/letter/l/ecae2f/48.png" class="avatar"> lmach:</div>
<blockquote>
<p>Do you have any idea why these values are so off from the measured distance?</p>
</blockquote>
</aside>
<p>Yes. As I wrote before, in the other topic that you opened on this question, you need to increase the resolution of the segmentation (default resolution is not enough for your model, as it is very thin relative to how large its extents are). See step step-by-step instructions here: <a href="https://slicer.readthedocs.io/en/latest/user_guide/modules/segmentations.html#import-an-existing-segmentation-from-model-surface-mesh-file" class="inline-onebox">Segmentations — 3D Slicer documentation</a> (“If the model contains very thin and delicate structures…”).</p>
<p>For accurate thickness estimation, spacing of the internal binary labelmap representation of the segmentation should be at least 5-10x smaller than the thickness of your surface.</p>
<p>If you find that oversampling value that gives you accurate enough results surpasses capabilities of your computer then you can use other proposed approaches (VMTK’s Extract Centerline or SlicerSALT’s skeletal representation), which do not require rasterization of the model.</p>

---

## Post #13 by @lmach (2020-09-23 18:39 UTC)

<p>Thank you, I really appreciate all the help that I have got from you. I will now try to increase the resolution of the segmentation with your suggestions!</p>

---

## Post #14 by @Randika_Perera (2022-05-16 11:01 UTC)

<p>Hi <a class="mention" href="/u/lassoan">@lassoan</a> , apparently the link which describes surface thickness measuring method using python, is no longer working. Could you please attach the updated link? really appreciate the help.</p>

---

## Post #15 by @mikebind (2022-05-16 21:28 UTC)

<p>It is at the updated page that link points to:</p>
<p><a href="https://slicer.readthedocs.io/en/latest/developer_guide/script_repository.html#get-scalar-values-at-surface-of-a-model" class="onebox" target="_blank" rel="noopener">https://slicer.readthedocs.io/en/latest/developer_guide/script_repository.html#get-scalar-values-at-surface-of-a-model</a></p>

---

---
topic_id: 37915
title: "Export Colorized Volume To Gltf"
date: 2024-08-16
url: https://discourse.slicer.org/t/37915
---

# Export colorized volume to .gltf

**Topic ID**: 37915
**Date**: 2024-08-16
**URL**: https://discourse.slicer.org/t/export-colorized-volume-to-gltf/37915

---

## Post #1 by @Rafael_V_Monteiro (2024-08-16 12:02 UTC)

<p>Dear community:<br>
I am starting to use the colorize volume extension, got my colorized volume, but can´t export it to .gltf through the OpenAnatomy export extension. My objective is to show the colorized volume online.<br>
Any hints would be welcomed.<br>
Best regards,</p>

---

## Post #2 by @pieper (2024-08-16 14:46 UTC)

<p>No, you won’t be able to do that since Colorized Volumes are RGBA image data but gltf only support polygonal surface data.</p>

---

## Post #3 by @Rafael_V_Monteiro (2024-08-17 13:05 UTC)

<p>Thanks, Steve. This means that this module is only standalone for Slicer? I mean, its rendering is not displayable by the Online3DViewer, for instance?<br>
Best,<br>
Rafael</p>

---

## Post #4 by @muratmaga (2024-08-17 13:39 UTC)

<p>3dviewer can only display surface.models. try the Glance viewer from Kitware if you want to see the colorized voxels. I believe it supports rgb images</p><aside class="onebox allowlistedgeneric" data-onebox-src="https://kitware.github.io/glance/app/">
  <header class="source">
      <img src="https://kitware.github.io/glance/app/ParaView.png" class="site-icon" width="128" height="128">

      <a href="https://kitware.github.io/glance/app/" target="_blank" rel="noopener nofollow ugc">kitware.github.io</a>
  </header>

  <article class="onebox-body">
    

<h3><a href="https://kitware.github.io/glance/app/" target="_blank" rel="noopener nofollow ugc">Kitware Glance</a></h3>

  <p>Data Viewer in a browser</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>


---

## Post #5 by @Thibault_Bruyere (2024-08-19 08:05 UTC)

<p>Hello,<br>
An alternative to Kitware Glance is Kitware Volview, that is specialized in rendering of medical volumes. It is also a little bit more maintained.<br>
They are both based on vtk.js, and there are a lot of useful new features that are not used yet in Glance/Volview, so you could try using an example to make your own viewer.<br>
<a href="https://volview.kitware.app/" class="onebox" target="_blank" rel="noopener nofollow ugc">https://volview.kitware.app/</a></p>

---

## Post #6 by @pieper (2024-08-19 13:51 UTC)

<p><a class="mention" href="/u/rafael_v_monteiro">@Rafael_V_Monteiro</a> let us know what you find if you try VolView and/or Glance.  In addition to vtk.js in native javascript, there is also a path to use traditional C<a href="https://docs.vtk.org/en/latest/getting_started/using_webassembly.html">++ VTK with WebAssembly</a> to render in browsers.  Both of these rely on WebGL which can in theory render the RGBA volumes generated by the ColorizeVolume module, but I don’t know if those code paths have been debugged on the WebGL side of things in either C++ VTK or vtk.js.  It <a href="https://github.com/Slicer/VTK/pull/43">took a while</a> to get it fixed in the OpenGL version.</p>

---

## Post #7 by @Rafael_V_Monteiro (2024-08-19 14:37 UTC)

<p>Absolutely Steve. I´ll look into it and report back.<br>
Thank you!<br>
Rafael</p>

---

## Post #8 by @Rafael_V_Monteiro (2024-09-17 09:53 UTC)

<p>Dear <a class="mention" href="/u/pieper">@pieper</a> , <a class="mention" href="/u/muratmaga">@muratmaga</a> , <a class="mention" href="/u/thibault_bruyere">@Thibault_Bruyere</a>:<br>
I tried to play with the colorized model and displayed the model with the suggested viewers, Glance and Volview.<br>
My colorized model was as below:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/a/f/afaefb1447b95515a869701c06140f8041c6c306.jpeg" data-download-href="/uploads/short-url/p4as1arJ3hhVzoP5BQ5o9GVCDJA.jpeg?dl=1" title="coati colorized slicer" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/a/f/afaefb1447b95515a869701c06140f8041c6c306.jpeg" alt="coati colorized slicer" data-base62-sha1="p4as1arJ3hhVzoP5BQ5o9GVCDJA" width="690" height="400" data-dominant-color="999BB2"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">coati colorized slicer</span><span class="informations">1124×652 55.9 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>The only way I found out to export it to rgb capable formats was through the data module, right click on the colorized volume and export to file. The formats I found reasonable were the .nrrd and .vtk. I tried to view both formats on the viewers above quoted. VolView was able to open both .vtk and .nrrd files, results below:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/d/9/d9843105eb4a6bf9eebcce9b1d66330386276113.png" data-download-href="/uploads/short-url/v2ePsLaCyh3j9iHkJoPGsU6EW4j.png?dl=1" title="coati nrrd volview" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/d/9/d9843105eb4a6bf9eebcce9b1d66330386276113_2_690x388.png" alt="coati nrrd volview" data-base62-sha1="v2ePsLaCyh3j9iHkJoPGsU6EW4j" width="690" height="388" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/d/9/d9843105eb4a6bf9eebcce9b1d66330386276113_2_690x388.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/d/9/d9843105eb4a6bf9eebcce9b1d66330386276113_2_1035x582.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/d/9/d9843105eb4a6bf9eebcce9b1d66330386276113_2_1380x776.png 2x" data-dominant-color="191714"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">coati nrrd volview</span><span class="informations">1920×1080 273 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
nrrd</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/c/9/c95c3dc6ab2588928bdd047935526e7d0ddc14a5.png" data-download-href="/uploads/short-url/sJjB3ppzRn4v9I9rJVS2xBtKfGZ.png?dl=1" title="coati vtk volview" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/9/c95c3dc6ab2588928bdd047935526e7d0ddc14a5_2_690x388.png" alt="coati vtk volview" data-base62-sha1="sJjB3ppzRn4v9I9rJVS2xBtKfGZ" width="690" height="388" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/9/c95c3dc6ab2588928bdd047935526e7d0ddc14a5_2_690x388.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/9/c95c3dc6ab2588928bdd047935526e7d0ddc14a5_2_1035x582.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/9/c95c3dc6ab2588928bdd047935526e7d0ddc14a5_2_1380x776.png 2x" data-dominant-color="181614"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">coati vtk volview</span><span class="informations">1920×1080 270 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>vtk</p>
<p>Glance was able to open only .nrrd format:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/c/c/ccc7dcd5757f53eb4bf3ba7a688a65f4fae78e35.jpeg" data-download-href="/uploads/short-url/tdzBFWBIzJ2SwRKaB1zc3ESu7Vr.jpeg?dl=1" title="coati nrrd glance" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/c/ccc7dcd5757f53eb4bf3ba7a688a65f4fae78e35_2_690x388.jpeg" alt="coati nrrd glance" data-base62-sha1="tdzBFWBIzJ2SwRKaB1zc3ESu7Vr" width="690" height="388" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/c/ccc7dcd5757f53eb4bf3ba7a688a65f4fae78e35_2_690x388.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/c/ccc7dcd5757f53eb4bf3ba7a688a65f4fae78e35_2_1035x582.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/c/ccc7dcd5757f53eb4bf3ba7a688a65f4fae78e35_2_1380x776.jpeg 2x" data-dominant-color="808799"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">coati nrrd glance</span><span class="informations">1920×1080 224 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Its clear that none of them was able to reproduce the details shown in slicer.<br>
Any suggestions were to go from here? Very thanks in advance,<br>
Rafael</p>

---

## Post #9 by @cpinter (2024-09-17 10:30 UTC)

<p>You cannot save a volume rendering, colorized or not. It is just a visual representation of volumetric data. I suggest reading this thread where this was discussed in detail:</p><aside class="quote quote-modified" data-post="1" data-topic="524">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://avatars.discourse-cdn.com/v4/letter/j/b19c9b/48.png" class="avatar">
    <a href="https://discourse.slicer.org/t/save-volume-rendering-as-stl-file/524">Save volume rendering as STL file</a> <a class="badge-category__wrapper " href="/c/support/11"><span data-category-id="11" style="--category-badge-color: #3AB54A; --category-badge-text-color: #FFFFFF;" data-drop-close="true" class="badge-category " title="The Support category is for all usage questions and general discussion of Slicer and extensions."><span class="badge-category__name">Support</span></span></a>
  </div>
  <blockquote>
    Hello, I am a new user on 3D slicer. 
I was using the display preset feature under volume rendering, and I was wondering if there is a way to save what I was viewing as an .stl or 3D printable file. 
For example, I was viewing a sample MRI using the CT-cardiac3 preset display. 
When I tried to save that specific 3D preset displayed sample in a .stl file, the option was unavailable. 
I was only able to see .vp (volume property), .txt formats. 
Is there a way to accomplish what I desire in 3D slic…
  </blockquote>
</aside>


---

## Post #10 by @pieper (2024-09-17 13:25 UTC)

<p>Thanks for testing this <a class="mention" href="/u/rafael_v_monteiro">@Rafael_V_Monteiro</a>.  As noted above, in order to implement this feature we needed to fix the shader in VTK C++ to support using the alpha channel as opacity and configure the rendering pipeline to use that mode.  I’m not sure any of the web based rendering systems support that configuration.  There’s nothing in theory that prevents it from working, but it may require debugging and also proper configuration to replicate the view you see in Slicer.  Making this work probably requires learning the source code and tracing the rendering path for RGBA mode (need to work in javascript, webgl, glsl, …).</p>

---

## Post #11 by @lassoan (2024-09-17 14:02 UTC)

<p><a class="mention" href="/u/rafael_v_monteiro">@Rafael_V_Monteiro</a> in all your tests, the volume rendering was done with “independent components” flag enabled. Independent component means that the scalar components of the volume are rendered independently (not as a colored voxel). You need to set <code>volumeProperty.SetIndependentComponents(false)</code> if you want color rendering. For more realistic rendering you also need to carefully set up transfer functions, lighting, volumetric screen-space ambient occlusion, etc.</p>
<p>If you use a recent C++ VTK version then you don’t need any code change. Not all these features are available in vtk.js (and if they are then similar fixes may be needed as in C++ VTK), so I would recommend to use WebAssembly VTK in your web browser.</p>

---

## Post #12 by @Rafael_V_Monteiro (2024-09-17 14:22 UTC)

<p>I will look into, thanks <a class="mention" href="/u/cpinter">@cpinter</a> !</p>

---

## Post #13 by @cpinter (2024-09-17 14:24 UTC)

<p>Based on the reactions I may have misunderstood something and just reacted without seeing the whole picture. But it may be useful regardless…</p>

---

## Post #14 by @Rafael_V_Monteiro (2024-09-17 14:24 UTC)

<p>Dear <a class="mention" href="/u/pieper">@pieper</a>, this seems beyond my programming capabilities…But I will study it anyway to see if I get someplace.<br>
Best regards,</p>

---

## Post #15 by @Rafael_V_Monteiro (2024-09-17 14:27 UTC)

<p>Thank you <a class="mention" href="/u/lassoan">@lassoan</a> , I will do the modification in the volume rendering to see what happens. I also will give a try to vtk.js, maybe it is the way.<br>
Best regards,</p>

---

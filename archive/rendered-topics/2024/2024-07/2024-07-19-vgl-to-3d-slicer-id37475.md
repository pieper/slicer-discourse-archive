---
topic_id: 37475
title: "Vgl To 3D Slicer"
date: 2024-07-19
url: https://discourse.slicer.org/t/37475
---

# .vgl to 3D Slicer

**Topic ID**: 37475
**Date**: 2024-07-19
**URL**: https://discourse.slicer.org/t/vgl-to-3d-slicer/37475

---

## Post #1 by @Mach_3_Turbo (2024-07-19 23:01 UTC)

<p>Hi,</p>
<p>Maybe my question is very beginner, so I apologize for that. I would like to say that I totally don’t understand any specialized terms connected with CT scanning and X-ray. I just want to measure distances inside a connector. I made some CT scans using a GE PHOENIX X-RAY NANOMEX 180T, and after that, I got files in formats like .tiff, .vgi, .pcj, .vol, .pcr, .pca, etc. The company has a program called myVGL, but there is no option for saving measured dimensions.</p>
<p>So, I would like to know if there is any option to display slices like in the myVGL viewer in 3D Slicer? I’ve read something here: <a href="https://discourse.slicer.org/t/loading-files-from-a-ge-microct/1937">Loading files from a GE microCT</a>, but unfortunately, I totally don’t understand it. The outcome should be something like what is displayed in the attached photos. Can someone please<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/c/7/c7a0376b5430afd9537e81d9b903716ba9bc1b06.png" data-download-href="/uploads/short-url/stYhhTesCgvaBLGZXZbLWGSThqe.png?dl=1" title="foto1" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/7/c7a0376b5430afd9537e81d9b903716ba9bc1b06_2_690x313.png" alt="foto1" data-base62-sha1="stYhhTesCgvaBLGZXZbLWGSThqe" width="690" height="313" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/7/c7a0376b5430afd9537e81d9b903716ba9bc1b06_2_690x313.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/7/c7a0376b5430afd9537e81d9b903716ba9bc1b06_2_1035x469.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/c/7/c7a0376b5430afd9537e81d9b903716ba9bc1b06_2_1380x626.png 2x" data-dominant-color="7F7F7E"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">foto1</span><span class="informations">1666×758 90.9 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/e/d/edc5f51e31dee5931a9a4755f614a485732d40ba.png" data-download-href="/uploads/short-url/xVrhvNMX3dWdI1X7kD4Gvbu2wRQ.png?dl=1" title="foto2" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/e/d/edc5f51e31dee5931a9a4755f614a485732d40ba.png" alt="foto2" data-base62-sha1="xVrhvNMX3dWdI1X7kD4Gvbu2wRQ" width="654" height="500" data-dominant-color="FBFBFB"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">foto2</span><span class="informations">972×742 20.8 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/5/35175dbee8e6e2c36d3807b302267bd710364280.jpeg" data-download-href="/uploads/short-url/7zFmNIThDHmX3JZZznejjZbXEqs.jpeg?dl=1" title="photo 3" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/5/35175dbee8e6e2c36d3807b302267bd710364280_2_690x480.jpeg" alt="photo 3" data-base62-sha1="7zFmNIThDHmX3JZZznejjZbXEqs" width="690" height="480" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/5/35175dbee8e6e2c36d3807b302267bd710364280_2_690x480.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/5/35175dbee8e6e2c36d3807b302267bd710364280_2_1035x720.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/5/35175dbee8e6e2c36d3807b302267bd710364280.jpeg 2x" data-dominant-color="8A8988"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">photo 3</span><span class="informations">1302×907 86.8 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div><br>
give me step by step tutorial, if it is possible what I wrote?</p>
<p>Thank you for any response and help, I appreciate it, and sorry for my lack of knowledge.</p>

---

## Post #2 by @muratmaga (2024-07-19 23:51 UTC)

<p>Install SlicerMorph extension, and follow the tutorial for ImageStacks.</p>
<aside class="onebox githubfolder" data-onebox-src="https://github.com/SlicerMorph/Tutorials/tree/main/ImageStacks#readme">
  <header class="source">
      <img src="https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">

      <a href="https://github.com/SlicerMorph/Tutorials/tree/main/ImageStacks#readme" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h3><a href="https://github.com/SlicerMorph/Tutorials/tree/main/ImageStacks#readme" target="_blank" rel="noopener">Tutorials/ImageStacks at main · SlicerMorph/Tutorials</a></h3>


  <p><span class="label1">SlicerMorph module tutorials. Contribute to SlicerMorph/Tutorials development by creating an account on GitHub.</span></p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>


---

## Post #3 by @Mach_3_Turbo (2024-07-20 10:24 UTC)

<p>Thank you for your response! I’ve tried it and it shows that there might be hidden processing in the myVGL viewer, or the information about the composition of slices is in a different files than .tif (tif files showing only images of rotating sample), because what I got looks like this.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/6/360e0bdffe1d0d581c8bec5c2e5c440540f3da00.jpeg" data-download-href="/uploads/short-url/7IbSpGgXILOA9gyrlCYPC6MY4mY.jpeg?dl=1" title="foto5" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/6/360e0bdffe1d0d581c8bec5c2e5c440540f3da00_2_690x470.jpeg" alt="foto5" data-base62-sha1="7IbSpGgXILOA9gyrlCYPC6MY4mY" width="690" height="470" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/6/360e0bdffe1d0d581c8bec5c2e5c440540f3da00_2_690x470.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/6/360e0bdffe1d0d581c8bec5c2e5c440540f3da00_2_1035x705.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/6/360e0bdffe1d0d581c8bec5c2e5c440540f3da00.jpeg 2x" data-dominant-color="585862"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">foto5</span><span class="informations">1372×936 114 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>

---

## Post #4 by @muratmaga (2024-07-20 14:31 UTC)

<p>Those are the shadow images (or tomograms), you need the reconstructed cross-sectional slices.</p>
<p>Is there a .vol file somewhere where you see the .pcr file? If that’s the case you might be able to use the GEVolImport.</p>

---

## Post #5 by @Mach_3_Turbo (2024-07-20 17:23 UTC)

<p>Yes, I have both, .pcr and .vol in the same directory. I tried to select .pcr file, for generating NHDR file, but after clicking on ‘Generate NHDR file’ button, nothing happens.</p>

---

## Post #6 by @muratmaga (2024-07-21 01:42 UTC)

<p>If you can share your data, we can take a look. <a class="mention" href="/u/chz31">@chz31</a></p>

---

## Post #7 by @Mach_3_Turbo (2024-07-21 09:11 UTC)

<aside class="onebox googledrive" data-onebox-src="https://drive.google.com/file/d/1WgxD7r2_hLAH0PzPN2tQp8YuMQwiA8ps/view?usp=sharing">
  <header class="source">

      <a href="https://drive.google.com/file/d/1WgxD7r2_hLAH0PzPN2tQp8YuMQwiA8ps/view?usp=sharing" target="_blank" rel="noopener nofollow ugc">drive.google.com</a>
  </header>

  <article class="onebox-body">
      <a href="https://drive.google.com/file/d/1WgxD7r2_hLAH0PzPN2tQp8YuMQwiA8ps/view?usp=sharing" target="_blank" rel="noopener nofollow ugc"><span class="googledocs-onebox-logo g-drive-logo"></span></a>



<h3><a href="https://drive.google.com/file/d/1WgxD7r2_hLAH0PzPN2tQp8YuMQwiA8ps/view?usp=sharing" target="_blank" rel="noopener nofollow ugc">1.zip</a></h3>

<p>Google Drive file.</p>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Thank you very much for your efforts and willingness.</p>

---

## Post #8 by @chz31 (2024-07-21 17:03 UTC)

<p>Thanks for sharing the file. The GEVOLImport was made for GE Tome MicroCT particularly. The format of PCR files are slightly different. I’ll try to modify it today and get back to you soon.</p>

---

## Post #9 by @muratmaga (2024-07-22 01:02 UTC)

<p>Until <a class="mention" href="/u/chz31">@chz31</a> can update GEVolImport to this format, you can use the RawImageGuess extension with the shown parameters:</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/6/3/63ca60a5f276802f934b2d4e5132f87f54fe62fd.jpeg" data-download-href="/uploads/short-url/eeMRpmEhMz2u1UERUzIcyKaCoqx.jpeg?dl=1" title="image"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/6/3/63ca60a5f276802f934b2d4e5132f87f54fe62fd_2_690x468.jpeg" alt="image" data-base62-sha1="eeMRpmEhMz2u1UERUzIcyKaCoqx" width="690" height="468" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/6/3/63ca60a5f276802f934b2d4e5132f87f54fe62fd_2_690x468.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/6/3/63ca60a5f276802f934b2d4e5132f87f54fe62fd_2_1035x702.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/6/3/63ca60a5f276802f934b2d4e5132f87f54fe62fd_2_1380x936.jpeg 2x" data-dominant-color="AFB0BB"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1920×1304 196 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>

---

## Post #10 by @chz31 (2024-07-22 05:42 UTC)

<p>The error generating NHDR is because the pcr file generated by GE Phoenix somehow has no voxel size value in it. In the pcr of GE Tome, this value is stored in “VoxelSizeRec”.</p>
<p>I found that the voxel size is stored in “.pca” as “VoxelSizeX” and “VoxelSizeY”, and in “.vgi” as “resolution”. My solution for the current problem is <a href="https://github.com/chz31/SlicerMorph/blob/ee4ebf514a777ab1b5e0a0a7230e0921664c255c/GEVolImport/GEVolImport.py#L145C1-L161C67" rel="noopener nofollow ugc">here</a>. Basically, if the pcr parser cannot find “VoxelSizeRec”, it will go to look for “.pca” and “.vgi” for the resolution information:</p>
<pre><code class="lang-auto">        if self.spacing is None:
           pcaFilePath = fileName + ".pca"
           vgiFilePath = fileName + ".vgi"
           if os.path.isfile(pcaFilePath):
               with open (pcaFilePath) as in_file:
                   for line in in_file:
                       lines.append(line.strip("\n"))
               for element in lines:
                   if(element.find("VoxelSizeX=")&gt;=0):
                       self.spacing = float(element.split('=')[1])
           elif os.path.isfile(vgiFilePath):
               with open (vgiFilePath) as in_file:
                   for line in in_file:
                       lines.append(line.strip("\n"))
               for element in lines:
                   if(element.find("resolution")&gt;=0):
                       self.spacing = float(element.split(' ')[2])
</code></pre>
<p>I successfully generated an NHDR file and use it to properly load the VOL into Slicer.<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/8/f/8f19cfe499b7509a1af866f7c1e766642065e822.jpeg" data-download-href="/uploads/short-url/kpVzZ4Gpdyi40i44HMn4IA3iWNY.jpeg?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/8/f/8f19cfe499b7509a1af866f7c1e766642065e822_2_517x228.jpeg" alt="image" data-base62-sha1="kpVzZ4Gpdyi40i44HMn4IA3iWNY" width="517" height="228" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/8/f/8f19cfe499b7509a1af866f7c1e766642065e822_2_517x228.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/8/f/8f19cfe499b7509a1af866f7c1e766642065e822_2_775x342.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/8/f/8f19cfe499b7509a1af866f7c1e766642065e822_2_1034x456.jpeg 2x" data-dominant-color="A4A3AE"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1920×849 137 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>To try the update, you can remove your current SlicerMorph extension, and download my fork of SlicerMorph <a href="https://github.com/chz31/SlicerMorph/tree/master" rel="noopener nofollow ugc">here</a>. You can just download the zip file, unzip it, and use Extension Wizard to install it. The Extension Wizard tutorial is <a href="https://www.youtube.com/watch?v=zutiQtp90vU" rel="noopener nofollow ugc">here</a>. Alternatively, you can go to <code>Slicer 5.7/Contents/Extensions-32879/SlicerMorph/lib/Slicer-5.7/qt-scripted-modules</code>(or where your Slicer is installed) and replace the content of GEVOLImport.py with the <a href="https://github.com/chz31/SlicerMorph/blob/master/GEVolImport/GEVolImport.py" rel="noopener nofollow ugc">updated script</a>.</p>
<p>This is a temporary solution, but it seems that GE Phoenix automatically generate “.pcr”, “.pca”, and “.vgi” along with the VOL file in the same directory. <a class="mention" href="/u/muratmaga">@muratmaga</a></p>
<p>One question I have is, the PCR file shows the scalar format = 5, which is unsigned short. In the “.vgi” file, it shows the format is “unsigned integer”. Are they practically the same? I used format = 5 in “.pcr”.</p>

---

## Post #11 by @muratmaga (2024-07-22 05:51 UTC)

<p>thanks <a class="mention" href="/u/chz31">@chz31</a> Yes, unsigned interger and short are the same.</p>
<p>Please send a PR with this change…</p>

---

## Post #13 by @chz31 (2024-07-22 06:01 UTC)

<p>Great! Just sent a PR.</p>

---

## Post #14 by @Mach_3_Turbo (2024-07-22 09:36 UTC)

<p>Thank you very much! Everything seems to be working well. Have a nice day!</p>

---

# How to mark some strings as translatable?

**Topic ID**: 34008
**Date**: 2024-01-28
**URL**: https://discourse.slicer.org/t/how-to-mark-some-strings-as-translatable/34008

---

## Post #1 by @chir.set (2024-01-28 08:22 UTC)

<p>Hi,</p>
<p>Python modules generated by the extension wizard are using the ‘_()’ function for strings to be translated.</p>
<p>The simple use case is obvious: _(“T e x t”).</p>
<p>How do we mark formatted strings with runtime place holders?</p>
<blockquote>
<p>f"Diameter ({lengthUnit})"</p>
</blockquote>
<p>By the way, what about strings in the widget managed by designer? Are they marked as translatable by default? Does the dev need to perform some special steps?</p>
<p>Thank you.</p>

---

## Post #2 by @pieper (2024-01-28 09:55 UTC)

<p>Hi <a class="mention" href="/u/chir.set">@chir.set</a> -</p>
<p>This document explains the process for internationalizing an extension:</p>
<p><a href="https://github.com/Slicer/SlicerLanguagePacks/blob/main/DevelopersManual.md">https://github.com/Slicer/SlicerLanguagePacks/blob/main/DevelopersManual.md</a></p>
<p>The .ui files should be fine in general with a few caveats described in the document.</p>
<p>For python, we need to avoid the <code>f</code> string interpolation method for translatable strings because the part in <code>{}</code> is executable python code, and we don’t want people to be able to use that to inject incorrect behaviour via the translation files.  Instead we need to use the named placeholder method of formatting.</p>

---

## Post #3 by @chir.set (2024-01-28 11:04 UTC)

<aside class="quote no-group" data-username="pieper" data-post="2" data-topic="34008">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/pieper/48/8_2.png" class="avatar"> pieper:</div>
<blockquote>
<p>we need to avoid the <code>f</code> string interpolation method</p>
</blockquote>
</aside>
<p>Thank you for your reply.</p>
<p>So, to continue on the above example, we should use :</p>
<pre><code class="lang-auto">lengthUnitValue = &lt;result of some processing&gt;
_("Diameter ({lengthUnit})").format(lengthUnit = lengthUnitValue)
</code></pre>
<p>according to the link above.</p>
<p>Is that right?</p>

---

## Post #4 by @pieper (2024-01-28 14:03 UTC)

<p>Yes, that looks correct.</p>
<p>Also people providing translations should be aware that these placeholders inside the <code>{}</code> blocks need to be left alone or the code can break.  Maybe weblate or something warns about this, I’m not sure.</p>
<p>Small nitpick, python style usually omits the spaces around the <code>=</code> sign so you may get style warnings about it.</p>

---

## Post #5 by @chir.set (2024-01-28 15:05 UTC)

<aside class="quote no-group" data-username="pieper" data-post="4" data-topic="34008">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/pieper/48/8_2.png" class="avatar"> pieper:</div>
<blockquote>
<p>python style usually omits the spaces around the <code>=</code> sign</p>
</blockquote>
</aside>
<p>Oops, funny, or not funny, I changed to ’ = ’ on purpose in many places for readability <img src="https://emoji.discourse-cdn.com/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"> <img src="https://emoji.discourse-cdn.com/twitter/smiley.png?v=12" title=":smiley:" class="emoji" alt=":smiley:" loading="lazy" width="20" height="20"> I’ll deal with that in a future maintenance session. Thanks.</p>

---

## Post #6 by @pieper (2024-01-28 15:40 UTC)

<p>Haha, yes, I do find it funny!</p>
<p>The style guide clearly says “<a href="https://peps.python.org/pep-0008/#a-foolish-consistency-is-the-hobgoblin-of-little-minds">A Foolish Consistency is the Hobgoblin of Little Minds</a>” and yet we kind of insist on it anyway : D</p>

---

## Post #7 by @lassoan (2024-01-29 00:38 UTC)

<p><a class="mention" href="/u/chir.set">@chir.set</a> if the document did not answer any of your questions or not clear enough then please submit a pull request to add/change the text. If needed then of course you can ask due clarification here.</p>

---

## Post #8 by @chir.set (2024-01-29 10:05 UTC)

<aside class="quote no-group" data-username="lassoan" data-post="7" data-topic="34008">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/lassoan/48/13_2.png" class="avatar"> lassoan:</div>
<blockquote>
<p>submit a pull request to add/change the text</p>
</blockquote>
</aside>
<p><a class="mention" href="/u/lassoan">@lassoan</a></p>
<p>I’m not sure that we have a similar understanding of the problem; I’ll push a branch in SlicerVMTK with changes I have made regarding translation and we’ll discuss in a PR over there.</p>

---

## Post #9 by @lassoan (2024-01-29 14:37 UTC)

<p>Yes, please send a pull request to SlicerVMTK extension. I’ll have a look and merge it and then I will create the translation component on Weblate.</p>

---

## Post #10 by @chir.set (2024-01-29 14:50 UTC)

<aside class="quote no-group" data-username="lassoan" data-post="9" data-topic="34008">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/lassoan/48/13_2.png" class="avatar"> lassoan:</div>
<blockquote>
<p>please send a pull request to SlicerVMTK extension</p>
</blockquote>
</aside>
<p><a href="https://github.com/vmtk/SlicerExtension-VMTK/pull/108" rel="noopener nofollow ugc">Here</a> it is, please consider that the translation commits are based on <a href="https://github.com/vmtk/SlicerExtension-VMTK/pull/107" rel="noopener nofollow ugc">#107</a>.</p>

---

## Post #11 by @lassoan (2024-02-25 14:13 UTC)

<p>You can now add translations for VMTK extension here:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://hosted.weblate.org/projects/3d-slicer/slicervmtk/">
  <header class="source">
      <img src="https://hosted.weblate.org/static/logo-32.png" class="site-icon" width="" height="">

      <a href="https://hosted.weblate.org/projects/3d-slicer/slicervmtk/" target="_blank" rel="noopener">Hosted Weblate</a>
  </header>

  <article class="onebox-body">
    <img width="" height="" src="https://hosted.weblate.org/widget/3d-slicer/slicervmtk/open-graph.png" class="thumbnail">

<h3><a href="https://hosted.weblate.org/projects/3d-slicer/slicervmtk/" target="_blank" rel="noopener">3D Slicer/SlicerVMTK</a></h3>

  <p>3D Slicer is being translated into 58 languages using Weblate. Join the translation or start translating your own project.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>


---

## Post #12 by @chir.set (2024-02-28 20:47 UTC)

<aside class="quote no-group" data-username="lassoan" data-post="11" data-topic="34008">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/lassoan/48/13_2.png" class="avatar"> lassoan:</div>
<blockquote>
<p>You can now add translations for VMTK extension here:</p>
</blockquote>
</aside>
<p>After translating SlicerVMTK to French, I merged <a href="https://github.com/vmtk/SlicerExtension-VMTK/pull/111" rel="noopener nofollow ugc">#111</a> to fix some inconsistencies.</p>
<p>Weblate does not seem to pickup updates from the code base on its own. How do the translatable strings get updated in weblate? Is it automated on Slicer’s side? Is it done manually on a scheduled basis?</p>
<p>Thanks for any info.</p>

---

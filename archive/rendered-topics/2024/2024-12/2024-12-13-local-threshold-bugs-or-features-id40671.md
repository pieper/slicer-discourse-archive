# local threshold: bugs or features?

**Topic ID**: 40671
**Date**: 2024-12-13
**URL**: https://discourse.slicer.org/t/local-threshold-bugs-or-features/40671

---

## Post #1 by @sulli419 (2024-12-13 05:06 UTC)

<p>First off thanks for this fantastic software.  I see a small team of people helping in the forums, so really appreciate what you do and imagine it is an immense amount of work!</p>
<p>I’m relatively inexperienced with slicer.  I noticed the new local threshold tool.  When use the funny round circle tool to select a range of pixels it seems to segment amazingly well, but for fine tuning I’m less sure…  Like what is Ctrl+ click is doing, where are you supposed to click relative the circle of pixels I select? why can’t I paint a precise discontinuous set of pixels to set my local threshold maybe even between slices? how to interpret the rules for the local histogram?  I’m also noticing something where I can create two segments with local thresholding, but when I got to third, it never commits the flashing pixels to a segment.  If I click away and come back nothing has been segmented.  Is there a detailed video that explains local thresholding (many don’t have audio and the resolution is poor) or can someone point me to where the most detailed documentation is.</p>
<p>Much appreciated,<br>
Thanks</p>

---

## Post #2 by @lassoan (2024-12-13 05:17 UTC)

<aside class="quote no-group" data-username="sulli419" data-post="1" data-topic="40671">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/sulli419/48/78859_2.png" class="avatar"> sulli419:</div>
<blockquote>
<p>what is Ctrl+ click is doing</p>
</blockquote>
</aside>
<p>Creates a seed for segmentation and then uses that seed for region growing.<br>
The seed is generated by thresholding with the chosen intensity range, then keeping the island where you Ctrl-clicked.</p>
<aside class="quote no-group" data-username="sulli419" data-post="1" data-topic="40671">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/sulli419/48/78859_2.png" class="avatar"> sulli419:</div>
<blockquote>
<p>why can’t I paint a precise discontinuous set of pixels to set my local threshold maybe even between slices</p>
</blockquote>
</aside>
<p>You can certainly do this, by simply using the <code>Paint</code> effect and then using <code>Grow from seeds</code> effect. <code>Local threshold</code> just automates painting of the seed (replaced 5-10 clicks by one click).</p>
<aside class="quote no-group" data-username="sulli419" data-post="1" data-topic="40671">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/sulli419/48/78859_2.png" class="avatar"> sulli419:</div>
<blockquote>
<p>but when I got to third, it never commits the flashing pixels to a segment</p>
</blockquote>
</aside>
<p>When the island at the clicked position is determined, the thresholding result is eroded to prevent small, thin connections between islands leading to adding unrelated regions to the seed. If the region you clicked on was relatively small then this erosion removes it completely and nothing can be drawn there. You can reduce the <code>Minimum diameter</code> parameter to avoid this.</p>

---

## Post #3 by @sulli419 (2024-12-20 19:17 UTC)

<p>Thanks for your explanation Iassoan.  I was taking some time to play around with local threshold in light of what you said.   After installing a few extensions it appeared my “stable install v.5.6” was misbehaving.  From the forums it sounded like you recommend using the “preview release” (now v. 5.7).  I installed this and it seems to have fixed some issues, but now I don’t see local thresholding as a button in the segment editor.  Are you phasing out this feature?  All best</p>

---

## Post #4 by @mau_igna_06 (2024-12-20 19:35 UTC)

<p>Please try installing SegmentEditorExtraEffects extension</p>
<p>HIH</p>

---

## Post #5 by @sulli419 (2024-12-20 20:17 UTC)

<p>Thanks.  That did the trick.  As an added note:  At first glance it seems like the local threshold feature added this way, to version 5.7 preview, works more smoothly.  I can run it on several segments without getting errors, albeit, this could be a coincidence.</p>

---

# How is the ui designed?

**Topic ID**: 41111
**Date**: 2025-01-16
**URL**: https://discourse.slicer.org/t/how-is-the-ui-designed/41111

---

## Post #1 by @VirOrange (2025-01-16 06:53 UTC)

<p>I am curious about how the UI for existing plugins in Slicer is designed, specifically how the UI in the Segment Editor plugin is structured. For example, how is the thresholding interface (or similar new sub-interfaces) designed and implemented? Also, where exactly are these UI files stored in the source code?</p>
<p>I would like to review the source code for these UI interfaces in order to help me design the UI for my own plugin. Could you kindly guide me to the specific locations of these UI files within the Slicer source code?</p>
<p>Thank you in advance for your help.</p>

---

## Post #2 by @pieper (2025-01-16 21:49 UTC)

<p>Most of these are implemented directly in python code:  <a href="https://github.com/Slicer/Slicer/blob/cb4a1776f9c0687df7a13e27e0f3d5d23e02fb5f/Modules/Loadable/Segmentations/EditorEffects/Python/SegmentEditorEffects/SegmentEditorThresholdEffect.py#L105" class="inline-onebox">Slicer/Modules/Loadable/Segmentations/EditorEffects/Python/SegmentEditorEffects/SegmentEditorThresholdEffect.py at cb4a1776f9c0687df7a13e27e0f3d5d23e02fb5f · Slicer/Slicer · GitHub</a></p>
<p>You could also use the designer to create UI files and access them from a segment editor plugin like we do in the scripted module template.</p>

---

## Post #3 by @VirOrange (2025-01-17 11:04 UTC)

<p>thanks for your kind help!<br>
I want to understand more about how the UI in 3D Slicer works in detail. Specifically, I’d like to know how the “apply” button functions, how sample data import is implemented in Python code, and how these components are connected. Are there efficient ways to help me better understand the purpose and usage of these functions?</p>
<p>My supervisor has asked me to implement a very simple plugin. The UI consists of a button to import sample data, a label to display the threshold value, a slider to adjust the threshold, and an “apply” button. Once the sample data is imported, it should automatically set a threshold suitable for the skull (using the first CT scan of the brain as an example). Clicking the “apply” button should display the corresponding model in the four-pane view.</p>
<p>My current idea is to extract the threshold processing code from the Segment Editor module and integrate it into my new plugin. However, this seems challenging since the Segment Editor is a complete and complex module. I’m having trouble identifying which parts of the code I can reuse and how to integrate them into a new plugin generated with Extension Wizard. My plugin is written in Python.</p>
<p>If anyone could provide some guidance, I would greatly appreciate it. I’m new to Slicer and want to understand its functionality better by creating my own plugin. I’d be thankful for any help or insights you can share.</p>

---

## Post #4 by @pieper (2025-01-17 14:38 UTC)

<p>I suggest you start by going through the developer tutorials, and use the Extension Wizard to make a sample module.  It will give you a template with an Apply button and a place where you can put in custom image processing logic.</p>
<p><a href="https://training.slicer.org/#developer">https://training.slicer.org/#developer</a></p>

---

## Post #5 by @VirOrange (2025-01-22 03:22 UTC)

<p>First, thank you for providing such a detailed and helpful tutorial on creating a custom 3D Slicer plugin. The step-by-step instructions have given me a good understanding of the relationships between different Slicer modules, and I appreciate your effort in putting this guide together.</p>
<p>However, while following the tutorial to create my first plugin using Python, I encountered some issues. I would be grateful for your insights on how to address them:</p>
<ol>
<li><strong>Missing <code>updateGUIFromParameterNode</code> Method</strong><br>
In the code generated by the Extension Wizard, the <code>MASSWidget</code> class (<code>class MASSWidget(ScriptedLoadableModuleWidget, VTKObservationMixin)</code>) does not contain the <code>updateGUIFromParameterNode(self, caller=None, event=None)</code> method referenced in the tutorial. Since the tutorial instructs replacing the body of this function, but it was missing entirely, I manually added the function.</li>
</ol>
<ul>
<li>Is this function still necessary in recent versions of 3D Slicer?</li>
<li>If it has been replaced by a different method, could you point me to an example or documentation for the current recommended approach?</li>
</ul>
<ol start="2">
<li><strong>AttributeError with <code>getCenterOfMass</code> Method</strong><br>
I added a <code>markupsFiducialsNode</code> according to the tutorial, but when running <strong>Reload &amp; Test</strong>, I encountered the following error:</li>
</ol>
<pre><code class="lang-auto">Traceback (most recent call last):
  File "D:\Application\Slicer 5.6.2\bin\Python\slicer\util.py", line 3255, in tryWithErrorDisplay
    yield
  File "D:\Application\Slicer 5.6.2\bin\Python\slicer\ScriptedLoadableModule.py", line 265, in onReloadAndTest
    test(msec=int(slicer.app.userSettings().value("Developer/SelfTestDisplayMessageDelay")), **kwargs)
  File "D:\Application\Slicer 5.6.2\bin\Python\slicer\ScriptedLoadableModule.py", line 83, in runTest
    testCase.runTest(**kwargs)
  File "H:/SLICER_MODULE/MASS/MASS/MASS.py", line 363, in runTest
    self.test_MASS1()
  File "H:/SLICER_MODULE/MASS/MASS/MASS.py", line 399, in test_MASS1
    logic.process(inputVolume, outputVolume, threshold, True)
  File "H:/SLICER_MODULE/MASS/MASS/MASS.py", line 318, in process
    self.centerOfMass = self.getCenterOfMass(inputMarkups)
  File "H:/SLICER_MODULE/MASS/MASS/MASS.py", line 293, in getCenterOfMass
    for i in range(markupsNode.GetNumberOfControlPoints()):
AttributeError: 'MRMLCorePython.vtkMRMLScalarVolumeNode' object has no attribute 'GetNumberOfControlPoints'
</code></pre>
<p>I understand this error indicates that <code>markupsNode</code> is treated as a <code>vtkMRMLScalarVolumeNode</code> rather than a <code>vtkMRMLMarkupsFiducialNode</code>. Could you help me understand what might cause this, and how I can ensure that <code>markupsNode</code> is correctly initialized as a <code>vtkMRMLMarkupsFiducialNode</code>?<br>
3. <strong>Additional Questions</strong></p>
<ul>
<li>Are there significant changes in the newer versions of 3D Slicer that affect the tutorial code?</li>
<li>Is there an updated version of this tutorial or a similar guide compatible with 3D Slicer 5.6.2?</li>
</ul>
<p>Thank you again for your guidance and the tutorial—it has been a great learning experience!</p>

---

## Post #6 by @pieper (2025-01-22 20:56 UTC)

<p>Good questions - this tutorial was created by the team at Queens, so I suspect they can reply. <a class="mention" href="/u/lassoan">@lassoan</a> <a class="mention" href="/u/sunderlandkyl">@Sunderlandkyl</a> probably know.  It says it was created for version 5.6 so I’m sure it’s mostly correct, but there were some tweaks to parameter nodes and maybe the that changed the API used by the tutorial.</p>
<p>Fortunately they put the tutorial in a github repo, so you can report changes there and maybe even offer a pull request with an updated powerpoint.</p>
<aside class="onebox githubrepo" data-onebox-src="https://github.com/Slicer/SlicerProgrammingTutorial?tab=readme-ov-file">
  <header class="source">

      <a href="https://github.com/Slicer/SlicerProgrammingTutorial?tab=readme-ov-file" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <div class="github-row" data-github-private-repo="false">
  <img width="690" height="344" src="https://opengraph.githubassets.com/e3b7fafc5def02992e81fe50b078c997/Slicer/SlicerProgrammingTutorial?tab=readme-ov-file" class="thumbnail">

  <h3><a href="https://github.com/Slicer/SlicerProgrammingTutorial?tab=readme-ov-file" target="_blank" rel="noopener">GitHub - Slicer/SlicerProgrammingTutorial: Introduction to Python scripting and module...</a></h3>

    <p><span class="github-repo-description">Introduction to Python scripting and module development for 3D Slicer</span></p>
</div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>Another issue I noticed is that the ppt didn’t get exported quite right to pdf.</p>
<p>PPT:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/7/b/7b9049cd1b90558f2eda9f40e5a751c4e301d2c3.png" data-download-href="/uploads/short-url/hD5RDpGgq9Tp2vpOj8QvBGHQAj9.png?dl=1" title="image"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/7/b/7b9049cd1b90558f2eda9f40e5a751c4e301d2c3_2_690x422.png" alt="image" data-base62-sha1="hD5RDpGgq9Tp2vpOj8QvBGHQAj9" width="690" height="422" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/7/b/7b9049cd1b90558f2eda9f40e5a751c4e301d2c3_2_690x422.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/7/b/7b9049cd1b90558f2eda9f40e5a751c4e301d2c3_2_1035x633.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/7/b/7b9049cd1b90558f2eda9f40e5a751c4e301d2c3_2_1380x844.png 2x" data-dominant-color="F2F1F3"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1716×1050 84.6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>PDF:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/b/c/bc2f9afa0a0f5115effd1431ed14b40d0153e8c7.png" data-download-href="/uploads/short-url/qQLL1EPa6GeP0R0FlmZkBtl3afB.png?dl=1" title="image"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/b/c/bc2f9afa0a0f5115effd1431ed14b40d0153e8c7_2_690x388.png" alt="image" data-base62-sha1="qQLL1EPa6GeP0R0FlmZkBtl3afB" width="690" height="388" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/b/c/bc2f9afa0a0f5115effd1431ed14b40d0153e8c7_2_690x388.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/b/c/bc2f9afa0a0f5115effd1431ed14b40d0153e8c7_2_1035x582.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/b/c/bc2f9afa0a0f5115effd1431ed14b40d0153e8c7_2_1380x776.png 2x" data-dominant-color="F2F2F3"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1898×1070 243 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>

---

## Post #7 by @lassoan (2025-01-22 21:36 UTC)

<p>The tutorial has not been fully updated after the parameter node wrapper updates. I’ve removed the obsolete parts now. Let us know if something does not work or unclear. I’ve also fixed the uploaded pdf.</p>

---

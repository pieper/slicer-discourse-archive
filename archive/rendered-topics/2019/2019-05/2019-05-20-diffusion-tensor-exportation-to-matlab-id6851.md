---
topic_id: 6851
title: "Diffusion Tensor Exportation To Matlab"
date: 2019-05-20
url: https://discourse.slicer.org/t/6851
---

# Diffusion tensor exportation to matlab

**Topic ID**: 6851
**Date**: 2019-05-20
**URL**: https://discourse.slicer.org/t/diffusion-tensor-exportation-to-matlab/6851

---

## Post #1 by @Bebo (2019-05-20 08:21 UTC)

<p>Hello every one,</p>
<p>I’m using 3D Slicer 4.10.1. I’m trying to export the FA-colored map to MatLab, generated by following the DTI tutotrial and using the Human Connectome Project data. Therefore, I want to export diffusion tensor data for each voxel to MatLab. However, I tried the code “Python code to access tensor data from a DTI volume” (<a href="https://www.slicer.org/slicerWiki/index.php/Documentation/Nightly/ScriptRepository#Access_values_in_a_DTI_tensor_volume" rel="nofollow noopener">https://www.slicer.org/slicerWiki/index.php/Documentation/Nightly/ScriptRepository#Access_values_in_a_DTI_tensor_volume</a>)" but I couldn’t export… Does someone know what happen? and why can"t I export the data ?</p>
<p>Regards</p>

---

## Post #2 by @ljod (2019-05-20 09:58 UTC)

<p>Hi what is your goal?</p>
<p>By accessing each voxel in Python you could write code to export the data.</p>
<p>Or you could not use python. Just save as nrrd and use a Matlab nrrd reader.</p>
<p>However, the DTI is not the same as the FA color image or DEC map. If you want to see this in Matlab you would need to write code to generate it from the DTI.</p>
<p>So please clarify your eventual goal so we can best advise.</p>

---

## Post #3 by @Bebo (2019-05-20 13:15 UTC)

<p>Hi <a class="mention" href="/u/ljod">@ljod</a>,</p>
<p>I’m currently using an nrrd-nhdr reader toolbox in MatLab. However, I can read the geometry but not the FA colored map from with the DWI (.nrrd) and DTI (.nhdr) files.</p>
<p>The first objective is to average the diffusion information (FA and vector of anisotropy) with elements with a larger size than the voxels as described below. Hence, the final objective is to build an anisotropic finite element human head model as Giordano et al. did (The influence of anisotropy on brain injury prediction)</p>
<p><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/f/e/fe3b3c2986356e2d2519c2cda3b70af8ee4b55c7.png" alt="Capture2" data-base62-sha1="Ah2bElkLxMqoG9D1gOAyZ7XPx7p" width="675" height="418"><br>
<img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/b/2/b24a5866b2df0054945d90263d94d8fa66140217.png" alt="Capture" data-base62-sha1="pregYFr1Au1rq83ru83U9ROe0Z1" width="507" height="415"></p>

---

## Post #4 by @ljod (2019-05-20 13:54 UTC)

<p>Hi thanks. There is no such thing as vector of anisotropy. I think you mean the eigenvector corresponding to the largest eigenvalue. Then the other thing you want to export is just the computed FA image, which should be straightforward as a nrrd image. You do not want to export the RGB color image, which will lack all information you need.</p>
<p>If you want Slicer to compute the eigenvector for you, you should look in the code for where the tensor glyphs are displayed. This can be used in the volumes module GUI where the options are for displaying tensors. Look at the tensors as glyphs, sticks specifically, aligned with major eigenvector. You can write similar code in python to get the eigenvectors and use the correct vector for export. Probably easiest to export this information as three nrrrd images, one for each component.</p>
<p>You’ll need to carefully check coordinate systems and view these vectors in Matlab to make sure the major eigenvectors are correctly aligned with the anatomy. I recommend viewing as glyphs in slicer and comparing.</p>

---

## Post #5 by @Bebo (2019-05-20 14:50 UTC)

<p>Thank you very much for your help !!! I got stuck for a while… I’ll do that  !!</p>

---

## Post #6 by @lassoan (2019-05-20 15:17 UTC)

<p>Just out of curiosity, why do you plan to use Matlab?</p>
<p>Have you considered using Python? It would have many advantages.</p>

---

## Post #7 by @Bebo (2019-05-21 07:29 UTC)

<p>Hi <a class="mention" href="/u/lassoan">@lassoan</a>,</p>
<p>I use MatLab because I’ll need it later for the writing a script for LS-Dyna (a solver for finite element method) which links the mechanical properties with the directions of anisotropy</p>

---

## Post #8 by @lassoan (2019-05-21 17:25 UTC)

<p>There should be freely available Python packages for LS-Dyna file reading/writing. For example, you may check out this one: <a href="http://www.qd-eng.de/index.php/2018/02/19/manipulating-ls-dyna-keyfiles-in-python/" rel="nofollow noopener">http://www.qd-eng.de/index.php/2018/02/19/manipulating-ls-dyna-keyfiles-in-python/</a>.</p>

---

## Post #9 by @Bebo (2019-05-22 08:02 UTC)

<p>I didn’t even know that it was possible… Thanky you for the information !</p>

---

# Calculating Simple Areas

**Topic ID**: 5435
**Date**: 2019-01-21
**URL**: https://discourse.slicer.org/t/calculating-simple-areas/5435

---

## Post #1 by @Caroline_Tomas (2019-01-21 04:36 UTC)

<p>I want to be able to calculate the area of total muscle on a single axial slice. When I run the segmentation statistics, it does give me “surface area” but I think it’s processing the entire CT scan instead of that single axial slice (it gives me a crazy high number). What is the best way to go about this?</p>

---

## Post #2 by @hherhold (2019-01-21 14:42 UTC)

<p>I wrote quick module a while back with lots of help from Andras and others on calculating the surface area of slices and plotting it - you should be able to extract the re-slicing and calculating part of this for your needs. (Or just use the plot data that comes out of it in the data table.)</p>
<p>There’s some extra stuff in there you probably don’t need that allows slicing along any axis. (Might be useful to you, though.)</p>
<p>Here is the gist with the module:</p>
<aside class="onebox githubgist">
  <header class="source">
      <a href="https://gist.github.com/hherhold/0492146f70ef0fc511b7b21410264481" target="_blank" rel="nofollow noopener">gist.github.com</a>
  </header>
  <article class="onebox-body">
    <h4><a href="https://gist.github.com/hherhold/0492146f70ef0fc511b7b21410264481" target="_blank" rel="nofollow noopener">https://gist.github.com/hherhold/0492146f70ef0fc511b7b21410264481</a></h4>
<h5>SliceAreaPlot.py</h5>
<pre><code class="Python">import os
import unittest
import vtk, qt, ctk, slicer
from slicer.ScriptedLoadableModule import *
from array import array
import logging
import vtk.util.numpy_support
import numpy as np

#</code></pre>
This file has been truncated. <a href="https://gist.github.com/hherhold/0492146f70ef0fc511b7b21410264481" target="_blank" rel="nofollow noopener">show original</a>

<p>
</p>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>Hope this helps!</p>
<p>-Hollister</p>

---

## Post #3 by @Holly_w (2019-11-24 23:24 UTC)

<p>Thank you so much for sharing this amazing module!<br>
Have one question here, when I opened the module, I went to the segmentation drop-down menu but it isn’t showing any of the existing segmentation and the plot button didn’t work. I tried to get to the documentation page to get help but the page is now 404 not found. Could you clarify with me how the segmentation drop-down menu works or is there any problem with my segmentation? Thank you so much for your help!<br>
Also, sorry for replying to this old thread :’(</p>

---

## Post #4 by @lassoan (2019-11-24 23:45 UTC)

<aside class="quote no-group" data-username="Holly_w" data-post="3" data-topic="5435">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/holly_w/48/5252_2.png" class="avatar"> Holly_w:</div>
<blockquote>
<p>isn’t showing any of the existing segmentation</p>
</blockquote>
</aside>
<p>Probably you have labelmap volumes in the scene and not segmentation nodes. Right-click on the labelmap volume in Data module and choose “Convert labelmap to segmentation node”.</p>

---

## Post #5 by @Holly_w (2019-11-25 03:58 UTC)

<p>Thank you for your speedy reply! However, I discovered it is not because of labelmap volume, it is the correct volume type. However the segment quantification and plotchart generated by surface area plot is rather odd, it is not distinguishing the areas in different segments of the segmentation but rather a table with only slice number. the plotchart is simply blank. I have attached a screenshot<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/2/f/2f2e5454f98440a8df87aa1b5916371f18630716.png" data-download-href="/uploads/short-url/6JnHukA9O5IPzlA2RmrezDC4OWy.png?dl=1" title="slicer-screenshot" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/2/f/2f2e5454f98440a8df87aa1b5916371f18630716_2_288x500.png" alt="slicer-screenshot" data-base62-sha1="6JnHukA9O5IPzlA2RmrezDC4OWy" width="288" height="500" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/2/f/2f2e5454f98440a8df87aa1b5916371f18630716_2_288x500.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/2/f/2f2e5454f98440a8df87aa1b5916371f18630716_2_432x750.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/2/f/2f2e5454f98440a8df87aa1b5916371f18630716_2_576x1000.png 2x" data-dominant-color="C9C9C9"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">slicer-screenshot</span><span class="informations">793×1374 54.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div> . Could you help me with that? Thank you so much!</p>

---

## Post #6 by @lassoan (2019-11-25 16:22 UTC)

<p>Do you see any errors in the Python console? (Ctrl-3)</p>

---

## Post #7 by @Holly_w (2019-11-25 18:38 UTC)

<p>Thank you for getting back to me Andras!<br>
Here’s the error code:</p>
<p>Traceback (most recent call last):<br>
File “C:/Users/holly/Downloads/slicer addon/0492146f70ef0fc511b7b21410264481-3a9881a0d5539e75ae0b325436e304fd24b44fde/SliceAreaPlot.py”, line 140, in onApplyButton<br>
logic.run(self.numSlices, self.segmentationNode, self.direction)<br>
File “C:/Users/holly/Downloads/slicer addon/0492146f70ef0fc511b7b21410264481-3a9881a0d5539e75ae0b325436e304fd24b44fde/SliceAreaPlot.py”, line 209, in run<br>
vimage = segmentationNode.GetBinaryLabelmapRepresentation(segmentID)<br>
TypeError: GetBinaryLabelmapRepresentation() takes exactly 2 arguments (1 given)</p>
<p>I don’t know how to fix the lack of one argument, could you help me look into that?</p>
<p>Thank you</p>

---

## Post #8 by @lassoan (2019-11-25 19:52 UTC)

<p>Slicer’s API has changed in recent preview releases (see <a href="https://www.slicer.org/wiki/Documentation/Nightly/Developers/Tutorials/MigrationGuide/Slicer">migration guide</a>).</p>
<p>To get binary labelmap representation, you need to create an image data object that will contain the result. To fix the issue, replace:</p>
<pre><code class="lang-python">vimage = segmentationNode.GetBinaryLabelmapRepresentation(segmentID)
</code></pre>
<p>by this:</p>
<pre><code class="lang-python">vimage = slicer.vtkOrientedImageData()
segmentationNode.GetBinaryLabelmapRepresentation(segmentId, vimage)
</code></pre>

---

## Post #9 by @joannecallow (2021-06-24 18:28 UTC)

<p>Hello. I made this adjustment to code and now the module will not even load. Is there a more recent edit that I need to make?</p>

---

## Post #10 by @lassoan (2021-06-24 18:34 UTC)

<p>The code snippets above are no longer relevant:</p>
<ul>
<li>You can now get surface area on a single slice by placing a closed curve and enabling “area” measurement.</li>
<li>You can measure cross sectional area of a segmentation along any world axis using “Segment cross-section area” module in Sandbox extension.</li>
</ul>

---

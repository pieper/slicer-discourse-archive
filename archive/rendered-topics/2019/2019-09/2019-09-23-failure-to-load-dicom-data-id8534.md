# Failure to load DICOM Data

**Topic ID**: 8534
**Date**: 2019-09-23
**URL**: https://discourse.slicer.org/t/failure-to-load-dicom-data/8534

---

## Post #1 by @Norbert (2019-09-23 11:39 UTC)

<p>Operating system: Windows10 Enterprise 1803<br>
Slicer version: 4.10.2<br>
Expected behavior: load DICOM Data<br>
Actual behavior: Error message: Could not load: 1: Unnamed series as a scalar volume</p>
<p>´The DICOM data were produced by a micro-CT and consist of 1080 Slices with 1214x1443 pixel, 16 bit greyscale, little endian.<br>
The first attempt seen in the log file was made using the data as supplied by the owner of the µCT, the second attempt after using the repair command of the DICOM import module. The error message is the same.<br>
The folder on Dropbox provides:<br>
the logfile<br>
Screenshots of the error messages<br>
Screenshot of the folders created by the repair command<br>
Three sample slices<br>
The complete data in a ZIP file</p>
<aside class="onebox whitelistedgeneric">
  <header class="source">
      <img src="https://cfl.dropboxstatic.com/static/images/favicon-vflUeLeeY.ico" class="site-icon" width="32" height="32">
      <a href="https://www.dropbox.com/sh/w2650ns9hs22tq1/AAC57MN3sm7bVyFPmPgfzA34a?dl=0" target="_blank" rel="nofollow noopener">Dropbox</a>
  </header>
  <article class="onebox-body">
    <img src="https://www.dropbox.com/static/images/spectrum-icons/generated/content/content-folder_dropbox-large.png" class="thumbnail onebox-avatar" width="160" height="160">

<h3><a href="https://www.dropbox.com/sh/w2650ns9hs22tq1/AAC57MN3sm7bVyFPmPgfzA34a?dl=0" target="_blank" rel="nofollow noopener">Slicer</a></h3>

<p>Shared with Dropbox</p>


  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>


---

## Post #2 by @Chris_Rorden (2019-09-23 14:13 UTC)

<p>You can import this with the dcm2niix extension:</p>
<ol>
<li>View-&gt;Extnesion Manager, search and install “SlicerDcm2nii” extension</li>
<li>Show “All Modules” and choose Dcm2niixGUI, select the “Input Directory” and select “Apply”</li>
</ol>

---

## Post #3 by @pieper (2019-09-23 14:24 UTC)

<p>Thanks for sharing the data.</p>
<p>I suspect the problem is in the pathname to the data files.  Probably a non-ascii character in the directory path?  Maybe rename the folder and try again.</p>
<blockquote>
<p>TypeError: SetArchetype argument 1: (unicode conversion error)</p>
</blockquote>
<p>The sample data loads fine for me using the regular dicom module.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/a/5/a5ca0e0251d3bd2eae0647419f9e7ac682e99ace.png" data-download-href="/uploads/short-url/nEDGkXmYySQMpkLaNrFK3iP8w3A.png?dl=1" title="image"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/a/5/a5ca0e0251d3bd2eae0647419f9e7ac682e99ace_2_690x239.png" alt="image" data-base62-sha1="nEDGkXmYySQMpkLaNrFK3iP8w3A" width="690" height="239" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/a/5/a5ca0e0251d3bd2eae0647419f9e7ac682e99ace_2_690x239.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/a/5/a5ca0e0251d3bd2eae0647419f9e7ac682e99ace_2_1035x358.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/a/5/a5ca0e0251d3bd2eae0647419f9e7ac682e99ace_2_1380x478.png 2x" data-dominant-color="D4D5D5"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1473×511 154 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>

---

## Post #4 by @Chris_Rorden (2019-09-23 14:43 UTC)

<p><a class="mention" href="/u/norbert">@Norbert</a> the unique identifiers (UIDs) in your images end with the space character. This is not <a href="http://dicom.nema.org/dicom/2013/output/chtml/part05/sect_6.2.html" rel="noopener nofollow ugc">allowed</a>;</p>
<blockquote>
<p>A character string containing a UID that is used to uniquely identify a wide variety of items. The UID is a series of numeric components separated by the period “.” character. If a Value Field containing one or more UIDs is an odd number of bytes in length, the Value Field shall be padded with a single trailing NULL (00H) character to ensure that the Value Field is an even number of bytes in length.</p>
</blockquote>
<p>Therefore, strictly speaking these are not valid images and likely to cause issues with a wide range of tools. The absence of Date [DA] and Time [TM] values may also cause issues with some systems (though removing these is often done for anonymization). The DICOM header is so minimal, I assume this was created locally rather than derived from an image generated by a major vendor. If the latter is the case, I would check the providence of these images and see if you can get a copy prior to the corruption of the UIDs.</p>
<h1><a name="p-29991-dicom-file-format-1" class="anchor" href="#p-29991-dicom-file-format-1" aria-label="Heading link"></a>Dicom-File-Format</h1>
<p>(0002,0000) UL 188                                      #   4, 1 FileMetaInformationGroupLength<br>
(0002,0001) OB 00\01                                    #   2, 1 FileMetaInformationVersion<br>
(0002,0002) UI =CTImageStorage                          #  26, 1 MediaStorageSOPClassUID<br>
(0002,0003) UI [2.25.283649587552159738113732996351763764310] #  44, 1 MediaStorageSOPInstanceUID<br>
(0002,0010) UI =LittleEndianExplicit                    #  20, 1 TransferSyntaxUID<br>
(0002,0012) UI [1.2.276.0.7230010.3.0.3.6.1]            #  28, 1 ImplementationClassUID<br>
(0002,0013) SH [OFFIS_DCMTK_361]                        #  16, 1 ImplementationVersionName<br>
(0008,0016) UI =CTImageStorage                          #  26, 1 SOPClassUID<br>
(0008,0018) UI [2.25.331769806794449124647336358989518081197] #  44, 1 SOPInstanceUID<br>
(0008,0020) DA (no value available)                     #   0, 0 StudyDate<br>
(0008,0023) DA (no value available)                     #   0, 0 ContentDate<br>
(0008,0030) TM (no value available)                     #   0, 0 StudyTime<br>
(0008,0033) TM (no value available)                     #   0, 0 ContentTime<br>
(0008,0050) SH (no value available)                     #   0, 0 AccessionNumber<br>
(0008,0090) PN (no value available)                     #   0, 0 ReferringPhysicianName<br>
(0010,0010) PN [Unspecified Patient]                    #  20, 1 PatientName<br>
(0010,0020) LO [2.25.243620553260306785155209470923857464493] #  44, 1 PatientID<br>
(0010,0030) DA (no value available)                     #   0, 0 PatientBirthDate<br>
(0010,0040) CS (no value available)                     #   0, 0 PatientSex<br>
(0020,000d) UI [2.25.243620553339534947668832889995431251117] #  44, 1 StudyInstanceUID<br>
(0020,000e) UI [2.25.243620553418763110181073985456379006125] #  44, 1 SeriesInstanceUID<br>
(0020,0010) SH (no value available)                     #   0, 0 StudyID<br>
(0020,0011) IS [1]                                      #   2, 1 SeriesNumber<br>
(0020,0012) IS [1]                                      #   2, 1 AcquisitionNumber<br>
(0020,0032) DS [0.500000\0.500000\15.123078]            #  28, 3 ImagePositionPatient<br>
(0020,0037) DS [1.000000\0.000000\0.000000\0.000000\1.000000\0.000000] #  54, 6 ImageOrientationPatient<br>
(0028,0002) US 1                                        #   2, 1 SamplesPerPixel<br>
(0028,0004) CS [MONOCHROME2]                            #  12, 1 PhotometricInterpretation<br>
(0028,0010) US 1443                                     #   2, 1 Rows<br>
(0028,0011) US 1214                                     #   2, 1 Columns<br>
(0028,0030) DS [0.027055\0.027055]                      #  18, 2 PixelSpacing<br>
(0028,0100) US 16                                       #   2, 1 BitsAllocated<br>
(0028,0101) US 16                                       #   2, 1 BitsStored<br>
(0028,0102) US 15                                       #   2, 1 HighBit<br>
(0028,0103) US 0                                        #   2, 1 PixelRepresentation<br>
(0028,1052) DS [0.000000]                               #   8, 1 RescaleIntercept<br>
(0028,1053) DS [1.000000]                               #   8, 1 RescaleSlope<br>
(7fe0,0010) OW 128a\1188\1162\12a4\1396\13c6\13cf\1487\13fb\1221\10b7\11fe\132e… # 3503604, 1 PixelData</p>

---

## Post #5 by @lassoan (2019-09-23 14:49 UTC)

<p><a class="mention" href="/u/chris_rorden">@Chris_Rorden</a> Thanks for the analysis, your help in investigating DICOM issues is greatly appreciated.</p>
<p><a class="mention" href="/u/norbert">@Norbert</a> If you have control over the DICOM creation process then I would suggest to follow recommendations of <a class="mention" href="/u/chris_rorden">@Chris_Rorden</a>. For a quick fix, you may be able to add all missing required fields by using <a href="https://slicer.readthedocs.io/en/latest/user_guide/module_dicompatcher.html" rel="nofollow noopener">DICOM Patcher</a> module.</p>

---

## Post #6 by @Norbert (2019-09-24 15:29 UTC)

<p>Dear all,</p>
<p>thank you very much for your advice. As a matter of fact, copying  the data to a new folder getting rid of non-ASCII characters<br>
in the directory names solved the problem.</p>
<p>With kind regards</p>
<p>Norbert</p>

---

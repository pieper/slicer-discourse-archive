# Slicer 4.10.1 for linux crashes when using live reconstruction in module Plus Remote

**Topic ID**: 6105
**Date**: 2019-03-11
**URL**: https://discourse.slicer.org/t/slicer-4-10-1-for-linux-crashes-when-using-live-reconstruction-in-module-plus-remote/6105

---

## Post #1 by @Tiffas (2019-03-11 13:18 UTC)

<p>Hi,<br>
I am on Ubuntu 18.04.2<br>
I use a version of Plus built from sources</p>
<p>I use Plus to retrieve an image and a transform streams. I added a volume reconstructor:</p>
<pre><code>&lt;PlusConfiguration version="2.1"&gt;
	&lt;DataCollection StartupDelaySec="1.0" &gt;
		&lt;DeviceSet 
			Name="Plus server: Local images and transform"
			Description="Broadcasting images and positions generated by a local server through OpenIGTLink."/&gt;
		&lt;Device
			Id="Local_Image"
			Type="OpenIGTLinkVideo"
			MessageType="IMAGE"
			ServerAddress="127.0.0.1"
			ServerPort="30001"
			IgtlMessageCrcCheckEnabled="FALSE"
			UseReceivedTimestamps="FALSE"
			SendTimeoutSec="30"
			ReceiveTimeoutSec="30"
			ReconnectOnReceiveTimeout ="FALSE"&gt;
			&lt;DataSources&gt;
				&lt;DataSource Id="Video" Type="Video" PortUsImageOrientation="MF"/&gt;
			&lt;/DataSources&gt;
			&lt;OutputChannels&gt;
				&lt;OutputChannel Id="VideoStream" VideoDataSourceId="Video" /&gt;
			&lt;/OutputChannels&gt;
		&lt;/Device&gt;
		&lt;Device
			Id="Local_Transform"
			Type="OpenIGTLinkTracker"
			MessageType="TRANSFORM"
			ServerAddress="127.0.0.1"
			ServerPort="30000"
			IgtlMessageCrcCheckEnabled="FALSE"
			UseReceivedTimestamps="FALSE"
			SendTimeoutSec="30"
			ReceivedTimeoutSec="30"
			ToolReferenceFrame="KUKABase"
			ReconnectOnReceiveTimeout ="FALSE"&gt;
			&lt;DataSources&gt;
				&lt;DataSource Id="Flange" Type="Tool"/&gt;
			&lt;/DataSources&gt;
			&lt;OutputChannels&gt;
				&lt;OutputChannel Id="TrackerStream"&gt;
					&lt;DataSource Id="Flange"/&gt;
				&lt;/OutputChannel&gt;
			&lt;/OutputChannels&gt;
		&lt;/Device&gt;
		&lt;Device 
			Id="TrackedVideoDevice" 
			Type="VirtualMixer" &gt;
			&lt;InputChannels&gt;
				&lt;InputChannel Id="TrackerStream" /&gt;
				&lt;InputChannel Id="VideoStream" /&gt;
			&lt;/InputChannels&gt;
			&lt;OutputChannels&gt;
				&lt;OutputChannel Id="TrackedVideoStream"/&gt;
			&lt;/OutputChannels&gt;
		&lt;/Device&gt;
		&lt;Device
			Id="CaptureDevice"
			Type="VirtualCapture"&gt;
			&lt;InputChannels&gt;
				&lt;InputChannel Id="TrackedVideoStream" /&gt;
			&lt;/InputChannels&gt;
		&lt;/Device&gt;
		&lt;Device
			Id="VolumeReconstructorDevice"
			Type="VirtualVolumeReconstructor"
			OutputVolDeviceName="3DScan"&gt;
			&lt;InputChannels&gt;
				&lt;InputChannel Id="TrackedVideoStream" /&gt;
			&lt;/InputChannels&gt;
			&lt;VolumeReconstruction
				ImageCoordinateFrame="Image" ReferenceCoordinateFrame="KUKABase"
				Interpolation="LINEAR" Optimization="NONE" CompoundingMode="MEAN" FillHoles="OFF" NumberOfThreads="0"
				ClipRectangleOrigin="0 0" ClipRectangleSize="0 0"
				OutputOrigin="0 0 0" OutputExtent="0 300 0 300 0 300" OutputSpacing="0.15 0.15 0.15" /&gt;
		&lt;/Device&gt;
	&lt;/DataCollection&gt;
	&lt;CoordinateDefinitions&gt;
		&lt;Transform From="Transducer" To="Flange"
			Matrix="1 0 0 0
							0 1 0 0
							0 0 1 0
							0 0 0 1"/&gt;	
		&lt;Transform From="Image" To="Transducer"
			Matrix="0.0616 0 0 0
							0 0 0.0616 0
							0 -0.0616 0 6.56
							0 0 0 1"/&gt;
  &lt;/CoordinateDefinitions&gt; 
	&lt;PlusOpenIGTLinkServer
		MaxNumberOfIgtlMessagesToSend="1"
		MaxTimeSpentWithProcessingMs="50"
		ListeningPort="18944"
		OutputChannelId="TrackedVideoStream"
		IgtlMessageCrcCheckEnabled="FALSE" 
		SendValidTransformsOnly="FALSE"&gt;
		&lt;DefaultClientInfo&gt;
			&lt;MessageTypes&gt;
				&lt;Message Type="IMAGE" /&gt;
				&lt;Message Type="TRANSFORM" /&gt;
			&lt;/MessageTypes&gt;
			&lt;ImageNames&gt;
				&lt;Image Name="Image" EmbeddedTransformToFrame="KUKABase"/&gt;
			&lt;/ImageNames&gt;
			&lt;TransformNames&gt;
				&lt;Transform Name="FlangeToKUKABase" /&gt;
    			&lt;/TransformNames&gt;
		&lt;/DefaultClientInfo&gt;
	&lt;/PlusOpenIGTLinkServer&gt;
&lt;/PlusConfiguration&gt;
</code></pre>
<p>I use the Plus Remote module for live reconstruction. It works fine on Slicer 4.8.1 for linux.<br>
On Slicer 4.10.1 for linux, after Plus indicates: “Send reconstructed volume to client through OpenIGTLink|” Slicer freezes.<br>
For those both version of Slicer I use binary release of Slicer and I download module with the module manager.</p>
<p>On a Slicer 4.11 built from sources, after the same message sent by Plus, Slicer seems to enter an infinite loop (one CPU at 100%).</p>

---

## Post #2 by @Sunderlandkyl (2019-03-11 17:51 UTC)

<p>Confirmed, I can reproduce the problem.</p>
<p>Opened issue in SlicerOpenIGTLink: <a href="https://github.com/openigtlink/SlicerOpenIGTLink/issues/73" rel="nofollow noopener">https://github.com/openigtlink/SlicerOpenIGTLink/issues/73</a><br>
I’ll debug and let you know when I find a solution.</p>

---

## Post #3 by @Sunderlandkyl (2019-03-11 22:05 UTC)

<p><a class="mention" href="/u/tiffas">@Tiffas</a> The problem in SlicerOpenIGTLink should be fixed by: <a href="https://github.com/IGSIO/OpenIGTLinkIO/commit/f5bb3b1848f7397bd836beae1682c994357b2427" rel="nofollow noopener">https://github.com/IGSIO/OpenIGTLinkIO/commit/f5bb3b1848f7397bd836beae1682c994357b2427</a>.</p>
<p>It will be available in the Stable and Nightly release tomorrow once the extensions have been built.</p>

---

## Post #4 by @Tiffas (2019-03-12 13:59 UTC)

<p>I confirm that after rebuilding <a href="https://github.com/openigtlink/SlicerOpenIGTLink" rel="nofollow noopener">https://github.com/openigtlink/SlicerOpenIGTLink</a> it works fine. Thanks for your very fast fix !</p>

---

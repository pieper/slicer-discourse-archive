# 2D views and 3D model transformation

**Topic ID**: 2920
**Date**: 2018-05-24
**URL**: https://discourse.slicer.org/t/2d-views-and-3d-model-transformation/2920

---

## Post #1 by @Dedy_Ariansyah (2018-05-24 17:04 UTC)

<p>Hello,</p>
<p>In Slicer, it is possible to display a 3D model aligned with 2D slices view in sagittal, coronal, and axial view.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/c/3cebade031b2e93259caa21765117267e7fb242b.png" data-download-href="/uploads/short-url/8GVAuxcHBntmPHrDfwEKeQpzsOD.png?dl=1" title="Untitled" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/c/3cebade031b2e93259caa21765117267e7fb242b_2_415x500.png" alt="Untitled" data-base62-sha1="8GVAuxcHBntmPHrDfwEKeQpzsOD" width="415" height="500" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/3/c/3cebade031b2e93259caa21765117267e7fb242b_2_415x500.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/c/3cebade031b2e93259caa21765117267e7fb242b.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/c/3cebade031b2e93259caa21765117267e7fb242b.png 2x" data-dominant-color="D7D9E2"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Untitled</span><span class="informations">416×501 69.6 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>I am trying to achieve the same visualization in the external software by exporting the model and 2d views generated by Slicer.</p>
<p>Is it possible to obtain the original pose of 3D model w.r.t sagital, coronal, and axial plane?</p>
<p>Many thanks</p>

---

## Post #2 by @pieper (2018-05-24 17:40 UTC)

<p>Yes, you can select the view using the popup controller.  Also you can switch to parallel projection mode if needed:</p>
<p><a href="https://www.slicer.org/wiki/Documentation/4.8/SlicerApplication/MainApplicationGUI#3D_Viewer" class="onebox" target="_blank">https://www.slicer.org/wiki/Documentation/4.8/SlicerApplication/MainApplicationGUI#3D_Viewer</a></p>

---

## Post #3 by @Dedy_Ariansyah (2018-05-25 08:05 UTC)

<p>Thanks Pieper for the reference. I have taken a look on it. But, i did not manage to find any function that allow me to access the information of relative transformation between planes (Axial, Sagittal, Coronal) and 3D model.</p>
<p>I wonder if you could give more hint on how to access numerical value of the transformation matrix (either manually or programmatically)?</p>
<p>Many thanks</p>

---

## Post #4 by @lassoan (2018-05-25 12:42 UTC)

<p>Transformation matrix can be accessed using GetSliceToRAS method of the slice node.</p>
<pre><code>sliceViewName = slicer.app.layoutManager().sliceViewNames()[0]
sliceToRAS = slicer.app.layoutManager().sliceWidget(sliceViewName).sliceLogic().GetSliceNode().GetSliceToRAS()
print(sliceToRAS)
</code></pre>
<p>You can also <a href="https://www.slicer.org/wiki/Documentation/Nightly/ScriptRepository#Change_default_slice_view_orientation">change the default slice orientations</a>.</p>

---

## Post #5 by @Dedy_Ariansyah (2018-05-25 15:35 UTC)

<p>Thanks again Andras.</p>
<p>I’ve been trying to understand the API to access the transformation matrix of the 3D model w.r.t to RAS but with no luck.</p>
<p>could you give me any clue?</p>
<p>Thanks</p>

---

## Post #6 by @lassoan (2018-05-25 19:26 UTC)

<p>SliceToRAS returns a  VTKMatrix4x4 that defines the slice plane’s position (4th column of the matrix) and slice vertical and horizontal axis directions (1st and 2nd column).</p>

---

## Post #7 by @Dedy_Ariansyah (2018-05-28 12:36 UTC)

<p>Hi Andras,</p>
<p>Yes, from the snippet code that you have provided, I am able to get the transformation matrix of the planes (axial, sagittal, and coronal). This time, I am trying to understand that given the 3D model is generated in the 3D view, I want to obtain the transformation matrix of the 3D model with respect to RAS coordinate system.</p>
<p>Many thanks</p>

---

## Post #8 by @priya.vada4 (2018-05-28 13:14 UTC)

<p>Hi Dedy</p>
<p>For obtaining the transformation matrix of the 3D view, you will have to access the vtkMRMLCameraNode of the 3D view and then get the position and orientation of the vtk camera.</p>
<p>Hope that helps.</p>
<p>Priya</p>

---

## Post #9 by @lassoan (2018-05-28 13:15 UTC)

<p>By default, the model is not transformed. If you have a transform applied to the node then you can get the transform using <a href="http://apidocs.slicer.org/master/classvtkMRMLTransformableNode.html#a66aa332e08f772323d055fe3ff74a527">modelNode.GetParentTransformNode()</a>. If you applied linear transform(s) then you can then get the combined transformation matrix using <a href="http://apidocs.slicer.org/master/classvtkMRMLTransformNode.html#a5d2d93382aa7da7ec3d9a27987305bce">transformNode.GetMatrixTransformToWorld(matrix)</a>. If the transformation chain contains non-linear transforms as well then you can get it using <a href="http://apidocs.slicer.org/master/classvtkMRMLTransformNode.html#a8f740f5e6e6e9b785c365826e4fada0c">transformNode.GetTransformToWorld(transform)</a>.</p>

---

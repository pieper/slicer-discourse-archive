# GenericAnatomyColors restart will cause black segment

**Topic ID**: 22463
**Date**: 2022-03-11
**URL**: https://discourse.slicer.org/t/genericanatomycolors-restart-will-cause-black-segment/22463

---

## Post #1 by @Dwij_Mistry (2022-03-11 22:00 UTC)

<p>When we create new segment it is taking segment color from <strong>GenericAnatomyColors</strong> lookup table. Please correct me if I am wrong.</p>
<p>When we are reaching at the end of segment color list it will start from the beginning, but here is one catch once it restart it will take <strong>“0 background 0 0 0 0”</strong> as a segment color<br>
which is not ideal instead it should start from <strong>“1 tissue 128 174 128 255”</strong></p>
<aside class="onebox githubblob" data-onebox-src="https://github.com/Slicer/Slicer/blob/86c9a550df82d42d3e6452daa3c5d94ca35b17bc/Base/Logic/Resources/ColorFiles/GenericAnatomyColors.txt#L10">
  <header class="source">

      <a href="https://github.com/Slicer/Slicer/blob/86c9a550df82d42d3e6452daa3c5d94ca35b17bc/Base/Logic/Resources/ColorFiles/GenericAnatomyColors.txt#L10" target="_blank" rel="noopener nofollow ugc">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/Slicer/Slicer/blob/86c9a550df82d42d3e6452daa3c5d94ca35b17bc/Base/Logic/Resources/ColorFiles/GenericAnatomyColors.txt#L10" target="_blank" rel="noopener nofollow ugc">Slicer/Slicer/blob/86c9a550df82d42d3e6452daa3c5d94ca35b17bc/Base/Logic/Resources/ColorFiles/GenericAnatomyColors.txt#L10</a></h4>



    <pre class="onebox"><code class="lang-txt">
      <ol class="start lines" start="1" style="counter-reset: li-counter 0 ;">
          <li>#WARNING: This file is automatically generated.</li>
          <li>#WARNING: Any edits made to this file may be overwritten.</li>
          <li>#</li>
          <li>#Filename: Slicer3_2010_GenericAnatomyColors.txt</li>
          <li>#Title: Slicer3:2010 GenericAnatomyColors</li>
          <li>#PageName: Slicer3:2010_GenericAnatomyColors</li>
          <li>#Source: http://www.slicer.org/slicerWiki/index.php/Slicer3:2010_GenericAnatomyColors#Lookup_table</li>
          <li>#</li>
          <li>#Begin table data:</li>
          <li class="selected">0 background 0 0 0 0</li>
          <li>1 tissue 128 174 128 255</li>
          <li>2 bone 241 214 145 255</li>
          <li>3 skin 177 122 101 255</li>
          <li>4 connective_tissue 111 184 210 255</li>
          <li>5 blood 216 101 79 255</li>
          <li>6 organ 221 130 101 255</li>
          <li>7 mass 144 238 144 255</li>
          <li>8 muscle 192 104 88 255</li>
          <li>9 foreign_object 220 245 20 255</li>
          <li>10 waste 78 63 0 255</li>
      </ol>
    </code></pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>This is how 0th indexed 3D segment looks like.<br>
<img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/1/d/1d51cee69aca62d54abe6d584320923c36745ffa.png" alt="image" data-base62-sha1="4bn7qXtkC43JPZ0UrL1BckUf7EC" width="666" height="351"></p>
<p>One more thing what is use of 0 background 0 0 0 0 color?<br>
When I removed this line it throwed me this error<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/0/2/027d958fff9262855dbd4d760b63f5c05921ac0f.png" data-download-href="/uploads/short-url/m216QlheSfjeylfaGommtQYUZF.png?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/0/2/027d958fff9262855dbd4d760b63f5c05921ac0f.png" alt="image" data-base62-sha1="m216QlheSfjeylfaGommtQYUZF" width="690" height="98" data-dominant-color="FCEBEC"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1020×146 2.55 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>
<p>Can you please elaborate how we can solve this issue.</p>
<p><img src="https://emoji.discourse-cdn.com/twitter/pray.png?v=12" title=":pray:" class="emoji" alt=":pray:" loading="lazy" width="20" height="20"> Thank you very much</p>

---

## Post #2 by @lassoan (2022-03-12 05:28 UTC)

<p>Generic anatomy color table contains over 300 colors, so if you exhausted all those then something is wrong. How did you end up going through all the colors?</p>
<aside class="quote no-group" data-username="Dwij_Mistry" data-post="1" data-topic="22463">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/dwij_mistry/48/15265_2.png" class="avatar"> Dwij_Mistry:</div>
<blockquote>
<p>When I removed this line it throwed me this error</p>
</blockquote>
</aside>
<p>You cannot remove the color index 0, as the color table starts from 0 and goes until the largest color index.</p>
<blockquote>
<p>Can you please elaborate how we can solve this issue.</p>
</blockquote>
<p>Using black as segment color is not a mistake, but I agree that a black segment does not look good, so I’ve updated the color selection implementation to skip the background when the restarting the color allocation.</p>
<p>To make it easier to set custom segment coloring schemes, I’ve added a method to set a custom color table node for default segment colors:</p>
<pre data-code-wrap="python"><code class="lang-python">displayNode = getNode('Segmentation').GetDisplayNode()
displayNode.SetSegmentColorGeneratorSourceColorNodeID('vtkMRMLColorTableNodeFileDarkBrightChartColors.txt')
</code></pre>

---

## Post #3 by @Dwij_Mistry (2022-03-12 06:53 UTC)

<aside class="quote no-group" data-username="lassoan" data-post="2" data-topic="22463">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/lassoan/48/13_2.png" class="avatar"> lassoan:</div>
<blockquote>
<p>How did you end up going through all the colors?</p>
</blockquote>
</aside>
<p>I was just testing by shorting the length of table and observing what happens if user add over 300 colors, maybe this happens when pigs fly.</p>
<aside class="quote no-group" data-username="lassoan" data-post="2" data-topic="22463">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/lassoan/48/13_2.png" class="avatar"> lassoan:</div>
<blockquote>
<p>To make it easier to set custom segment coloring schemes, I’ve added a method to set a custom color table node for default segment colors:</p>
</blockquote>
</aside>
<p>Thank you very much sir.</p>

---

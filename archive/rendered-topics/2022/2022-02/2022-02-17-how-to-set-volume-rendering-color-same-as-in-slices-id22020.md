---
topic_id: 22020
title: "How To Set Volume Rendering Color Same As In Slices"
date: 2022-02-17
url: https://discourse.slicer.org/t/22020
---

# How to set volume rendering color same as in slices?

**Topic ID**: 22020
**Date**: 2022-02-17
**URL**: https://discourse.slicer.org/t/how-to-set-volume-rendering-color-same-as-in-slices/22020

---

## Post #1 by @rasunag27 (2022-02-17 11:05 UTC)

<p>Hi,</p>
<p>I have loaded RGB compatible ‘.dcm’ slices into the 3D slicer. I am able to get the slices in the RGB format as required. But the 3D volume from volume rendering shows grayscale. If I use preset from Volumes, it will get generated. But, I require the color format as addressed from slices.</p>
<p>How can I change the volume color as same as seen from slices?</p>
<p>Regards,<br>
Sunag R A.</p>

---

## Post #2 by @pieper (2022-02-17 13:47 UTC)

<p>See if you can replicate what’s shown in the post below.  Be sure you are using the latest and report back with details if things aren’t working (i.e. what slicer version you used, how to replicate the issue public data).</p><aside class="quote quote-modified" data-post="1" data-topic="19732">
  <div class="title">
    <div class="quote-controls"></div>
    <img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/lassoan/48/13_2.png" class="avatar">
    <a href="https://discourse.slicer.org/t/color-rgb-volume-rendering/19732">Color (RGB) volume rendering</a> <a class="badge-category__wrapper " href="/c/support/11"><span data-category-id="11" style="--category-badge-color: #3AB54A; --category-badge-text-color: #FFFFFF;" data-drop-close="true" class="badge-category " title="The Support category is for all usage questions and general discussion of Slicer and extensions."><span class="badge-category__name">Support</span></span></a>
  </div>
  <blockquote>
    In recent Slicer Preview Releases, color volume rendering has been made much easier to access. While previously an alpha channel had to be created manually for rendering color RGB volumes, now the alpha channel is created automatically (from the luminance of the image). 
To render an RGB volume, just load the image stack and drag-and-drop the volume from the Data module to a 3D view (or use Volume Rendering module). When a color volume is loaded then “Scalar Color Mapping” section is not display…
  </blockquote>
</aside>


---

## Post #3 by @rasunag27 (2022-02-18 03:39 UTC)

<p><a class="mention" href="/u/pieper">@pieper</a></p>
<p>Thanks for the reply.</p>
<p>Firstly, I am using 3D Slicer with version 4.11.2021226. So, back to 3D volume rendering, I am able to get the color changes based on the ‘preset’ in the Display panel. What I am trying to say is, for example, I have loaded dcm files with temperature RGB values. But in 3D model, apart from Preset color codes, how do I make is similar to color codes of my dcm slices?</p>
<p>I have attached the image for refrence. In the image, we can see that in volume, the color is generated by preset (say, US-Fetal). How to make the color code similar to slice views as can be seen in axial, coronal and sagittal views?<br>
<strong>Or do we need to add new color codes in presets.xml?</strong></p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/a/1/a1730a4712e7e1fc0c66e9b76d83e400a9242aab.jpeg" data-download-href="/uploads/short-url/n2floDSTaUljikKejm6HY420dyr.jpeg?dl=1" title="preset_color_3slicer" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/a/a1730a4712e7e1fc0c66e9b76d83e400a9242aab_2_690x355.jpeg" alt="preset_color_3slicer" data-base62-sha1="n2floDSTaUljikKejm6HY420dyr" width="690" height="355" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/a/a1730a4712e7e1fc0c66e9b76d83e400a9242aab_2_690x355.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/a/a1730a4712e7e1fc0c66e9b76d83e400a9242aab_2_1035x532.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/a/a1730a4712e7e1fc0c66e9b76d83e400a9242aab_2_1380x710.jpeg 2x" data-dominant-color="6D7067"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">preset_color_3slicer</span><span class="informations">1848×951 252 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Regards,<br>
Sunag R A.</p>

---

## Post #4 by @lassoan (2022-02-18 04:04 UTC)

<aside class="quote no-group" data-username="rasunag27" data-post="3" data-topic="22020">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://sea2.discourse-cdn.com/flex020/user_avatar/discourse.slicer.org/rasunag27/48/3551_2.png" class="avatar"> rasunag27:</div>
<blockquote>
<p>Firstly, I am using 3D Slicer with version 4.11.2021226.</p>
</blockquote>
</aside>
<p>Please try a recent Slicer Preview Release. RGB volume rendering is set up automatically in these versions, but not in 4.11.2021226.</p>

---

## Post #5 by @rasunag27 (2022-02-18 04:07 UTC)

<p><a class="mention" href="/u/lassoan">@lassoan</a></p>
<p>Thanks for the reply. Newer version means 4.13.0 which is in Preview release? In Stable release, I could see 4.11.2021226 as the highest version.</p>
<p>Regards,<br>
Sunag R A.</p>

---

## Post #6 by @lassoan (2022-02-18 04:10 UTC)

<p>Yes, we mean a recent preview release. It is not the stable release.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/a/e/aeb9cc990357c452c976543382d1d911077688b8.png" data-download-href="/uploads/short-url/oVH9tttZA3blp58cghRlFwJbrBu.png?dl=1" title="image"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/a/e/aeb9cc990357c452c976543382d1d911077688b8_2_582x500.png" alt="image" data-base62-sha1="oVH9tttZA3blp58cghRlFwJbrBu" width="582" height="500" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/a/e/aeb9cc990357c452c976543382d1d911077688b8_2_582x500.png, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/a/e/aeb9cc990357c452c976543382d1d911077688b8_2_873x750.png 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/a/e/aeb9cc990357c452c976543382d1d911077688b8_2_1164x1000.png 2x" data-dominant-color="C7C9C9"><div class="meta"><svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1515×1301 94.3 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg></div></a></div></p>

---

## Post #7 by @rasunag27 (2022-02-18 04:11 UTC)

<p>Okay thanks. Will work on it.</p>
<p>Regards,<br>
Sunag R A.</p>

---

## Post #8 by @rasunag27 (2022-02-18 05:15 UTC)

<p><a class="mention" href="/u/lassoan">@lassoan</a></p>
<p>I am unable to download the Linux preview version. Tired in Mozilla and Chrome many times. Its getting failed.</p>
<p>Regards,<br>
Sunag R A.</p>

---

## Post #9 by @lassoan (2022-02-18 14:18 UTC)

<p>Sorry, there is an issue with the packaging of the latest Slicer Preview Release on Linux. We are working on it, you can track its status here:</p>
<aside class="onebox githubissue" data-onebox-src="https://github.com/Slicer/Slicer/issues/6202">
  <header class="source">

      <a href="https://github.com/Slicer/Slicer/issues/6202" target="_blank" rel="noopener">github.com/Slicer/Slicer</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue">
	  <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/Slicer/Slicer/issues/6202" target="_blank" rel="noopener">Files is missing from Slicer package on linux</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2022-02-18" data-time="14:15:49" data-timezone="UTC">02:15PM - 18 Feb 22 UTC</span>
      </div>


      <div class="user">
        <a href="https://github.com/lassoan" target="_blank" rel="noopener">
          <img alt="lassoan" src="https://avatars.githubusercontent.com/u/307929?v=4" class="onebox-avatar-inline" width="20" height="20">
          lassoan
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          type:bug
        </span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          priority:urgent
        </span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">Multiple users reported that latest Slicer Preview Release does not start on Lin<span class="show-more-container"><a href="" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">ux. It seems that some ITK shared library file is missing.

Examples:
- https://github.com/Project-MONAI/MONAILabel/discussions/640#discussioncomment-2204689
- https://discourse.slicer.org/t/how-to-set-volume-rendering-color-same-as-in-slices/22020/8?u=lassoan

## Environment
- Slicer version: Slicer-4.13.0-2022-02-17
- Operating system: Linux</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>In the meantime, you can use a Slicer Preview Release from a week ago, downloaded via this link: <a href="https://download.slicer.org/?offset=-7">https://download.slicer.org/?offset=-7</a> (the <code>-7</code> means going back 7 days)</p>

---

## Post #10 by @rasunag27 (2022-02-24 03:42 UTC)

<p><a class="mention" href="/u/lassoan">@lassoan</a></p>
<p>Hi, I tried working with 4.13 with previous releases like 7, 20, 50 and 100 days back. In these, I am unable to get any volume rendering view. Nothing happens when I opt for showing volume rendering.</p>
<p>Apart from this, I would like to understand the xml contents in the “presets.xml” mainly on colorTransfer parameter.</p>
<p>Example xml from 3dslicer:</p>
<p><code>&lt;VolumeProperty selected="false" hideFromEditors="false" name="MR-T2-Brain" gradientOpacity="4 0 1 160.25 1" userTags="" specularPower="40" scalarOpacity="10 0 0 36.05 0 218.302 0.171429 412.406 1 641 1" id="vtkMRMLVolumePropertyNode26" specular="0.5" shade="1" ambient="0.3" colorTransfer="16 0 0 0 0 98.7223 0.956863 0.839216 0.192157 412.406 0 0.592157 0.807843 641 1 1 1" selectable="true" diffuse="0.6" interpolation="1" effectiveRange="0 412.406"/&gt;</code></p>
<p>Or, if any other version which loads color model as slices then that would be good.</p>
<p>Regards,<br>
Sunag R A.</p>

---

## Post #11 by @lassoan (2022-02-24 05:06 UTC)

<p>I’ve just tested RGB volume rendering on Linux using Slicer-4.13.0-2022-02-14 and it worked well:</p>
<p></p><div class="video-container">
    <video width="100%" height="100%" preload="metadata" controls="">
      <source src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/e/3e2c48de4486c2d735398c023ae6303e70fdba4d.mp4">
      <a href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/e/3e2c48de4486c2d735398c023ae6303e70fdba4d.mp4">https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/3/e/3e2c48de4486c2d735398c023ae6303e70fdba4d.mp4</a>
    </source></video>
  </div><p></p>
<p>Please try to follow exactly what is done in the video, using the same <a href="https://github.com/lassoan/PublicTestingData/releases/download/data/HeadHistoCropped.nrrd">Visible Human head RGB volume</a> and see if that works for you.</p>
<p>If it works then something may be wrong with your data. If you share it (upload somewhere and post the link) then we can have a look.</p>

---

## Post #13 by @lassoan (2022-02-24 05:58 UTC)

<p>Thank you, the video showed what your problem was: you used the experimental “Multi-volume rendering” mode, which <a href="https://slicer.readthedocs.io/en/latest/user_guide/modules/volumerendering.html#limitations">does not support RGB volume rendering</a>.</p>

---

## Post #14 by @rasunag27 (2022-02-24 06:04 UTC)

<p><a class="mention" href="/u/lassoan">@lassoan</a></p>
<p>Yes. I changed to CPU ray casting and it worked perfectly for the head image. It is not working for my case study.</p>
<p>If you could provide an email id, I would like to send the case study (zip file of dicom).</p>
<p>Regards,<br>
Sunag  R A.</p>

---

## Post #15 by @lassoan (2022-02-24 06:05 UTC)

<p>You can send me a private message by clicking on my username and then clicking on “Message”.</p>

---

## Post #16 by @lassoan (2022-02-24 06:40 UTC)

<p>I’ve received the data set and it is not legal DICOM.</p>
<p>First of all, the same SOP instance UID is used in all the files, so the DICOM importer imports the first file and ignores the rest.</p>
<p>If I use a workaround and instead of properly using the DICOM module, I just add the data set as non-DICOM data (that uses ITK’s DICOM reader) then the image appears but since the voxel type is short (instead of unsigned char) and the range is off (-1024 to -769), the volume renderer does not show anything.</p>
<p>If you fix the data set to have prober unique identifiers and voxel type and range then Slicer will display it correctly.</p>
<p>RGB volumes are problematic for many reasons, so instead of burning in a colormap I would strongly recommend to save a standard scalar image and apply a color lookup table in the application. You can choose colormap for slice views in Volumes module and apply the same coloring in Volume rendering module by clicking on <code>Synchronize with Volumes module</code> button.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/e/9/e97f2a3288aa68f69cd37c2fc4180ddbfb8d9ba2.jpeg" data-download-href="/uploads/short-url/xjBHoQWZNBnbWlo52bZE0PP8qDU.jpeg?dl=1" title="image"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/e/e97f2a3288aa68f69cd37c2fc4180ddbfb8d9ba2_2_690x418.jpeg" alt="image" data-base62-sha1="xjBHoQWZNBnbWlo52bZE0PP8qDU" width="690" height="418" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/e/e97f2a3288aa68f69cd37c2fc4180ddbfb8d9ba2_2_690x418.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/e/e97f2a3288aa68f69cd37c2fc4180ddbfb8d9ba2_2_1035x627.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/e/e97f2a3288aa68f69cd37c2fc4180ddbfb8d9ba2_2_1380x836.jpeg 2x" data-dominant-color="80AABA"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1920×1165 219 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div></p>

---

## Post #17 by @rasunag27 (2022-02-24 06:43 UTC)

<p><a class="mention" href="/u/lassoan">@lassoan</a></p>
<p>Thank you for the detailed explanation. I will work on it.</p>
<p>Regards,<br>
Sunag R A.</p>

---

## Post #18 by @rasunag27 (2022-02-24 11:53 UTC)

<p><a class="mention" href="/u/lassoan">@lassoan</a></p>
<p>Hi,<br>
Based on manual color map, I was able to get the 3D model with desired color coding. I saved the scene as “.mrml” file.</p>
<p>Is there way that I could load this mrml color code as default whenever I load new dicom files.?</p>
<p>Attached image as reference.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/e/6/e679eddd9689f232d914140313718b01611640f8.jpeg" data-download-href="/uploads/short-url/wST374Y6hJRza0NzADsWH4ZYdPW.jpeg?dl=1" title="mrml_save" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/e/e679eddd9689f232d914140313718b01611640f8_2_690x478.jpeg" alt="mrml_save" data-base62-sha1="wST374Y6hJRza0NzADsWH4ZYdPW" width="690" height="478" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/e/e679eddd9689f232d914140313718b01611640f8_2_690x478.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/e/e679eddd9689f232d914140313718b01611640f8_2_1035x717.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/2X/e/e679eddd9689f232d914140313718b01611640f8_2_1380x956.jpeg 2x" data-dominant-color="C1C3C0"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">mrml_save</span><span class="informations">1422×987 324 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Regards,<br>
Sunag R A.</p>

---

## Post #19 by @lassoan (2022-02-24 14:47 UTC)

<p>Yes, you can customize how specific type of DICOM files are visualized by default.</p>
<p>Probably the simplest solution is to add an observer to the scene and when a new node is added check if that is that special kind. If it is then modify the visualization: change color map, show volume rendering, etc. See an example <a href="https://slicer.readthedocs.io/en/latest/developer_guide/script_repository.html#show-volume-rendering-automatically-when-a-volume-is-loaded">here</a>.</p>
<p>If you want a more clear solution and also specify custom right-click menu actions, etc. then you can define a new Subject Hierarchy plugin that will recognize the special image type and return a high confidence value for it (so your plugin will be the owner of that image). In this case, your plugin will show/hide the volume, so you can customize how exactly it is performed. See these related examples: <a href="https://slicer.readthedocs.io/en/latest/developer_guide/script_repository.html#subject-hierarchy-plugin-offering-view-context-menu-action">simple subject hierarchy plugin</a>, <a href="https://github.com/SlicerRt/SlicerRT/blob/master/DicomRtImportExport/SubjectHierarchyPlugins/qSlicerSubjectHierarchyRtDoseVolumePlugin.h">complete example of a new volume type</a> (RT dose volume, with custom colormap, custom icon in the subject hierarchy, custom right-click menu actions).</p>

---

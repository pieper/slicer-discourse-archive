# Is it possible to register two meshes then subtract away the overlapping region?

**Topic ID**: 24571
**Date**: 2022-07-29
**URL**: https://discourse.slicer.org/t/is-it-possible-to-register-two-meshes-then-subtract-away-the-overlapping-region/24571

---

## Post #1 by @jsalas424 (2022-07-29 23:23 UTC)

<p>Hi all,</p>
<p>TLDR: I want to register two meshes and find the corresponding points/indices so that I can compare a derived value within and outside my region of interest.</p>
<p>I have mesh A generated by one modality, I then performed calculations at each vertex. The data looks like this:</p>
<pre><code class="lang-auto">calculated_value   X             Y              Z
0.596             -65.355        15.519         190.760
0.601             -64.811        17.557         190.816
0.602             -66.040        17.290         191.835
0.598             -64.785        16.570         190.624
0.598             -64.020        16.604         190.632
.....             .....          .....          .....
</code></pre>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/9/1/917a8f2c6cb7c89d4456cbce3b8c14281bc857d6.jpeg" data-download-href="/uploads/short-url/kKXOxNmpJLlPPQXtUkvIJG5P2cK.jpeg?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/9/1/917a8f2c6cb7c89d4456cbce3b8c14281bc857d6_2_680x500.jpeg" alt="image" data-base62-sha1="kKXOxNmpJLlPPQXtUkvIJG5P2cK" width="680" height="500" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/9/1/917a8f2c6cb7c89d4456cbce3b8c14281bc857d6_2_680x500.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/9/1/917a8f2c6cb7c89d4456cbce3b8c14281bc857d6.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/9/1/917a8f2c6cb7c89d4456cbce3b8c14281bc857d6.jpeg 2x" data-dominant-color="9799B0"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">944×694 65.4 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Mesh B was then generated from an MRI of the same organ using a different modality, and only corresponds to a region of interest relative to Mesh A. Looks something like this:<br>
<div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/9/5/95fd3548542aded4228f525e4849d380c38ad062.jpeg" data-download-href="/uploads/short-url/loRDCpiQu3eGrFXIkjtza4kmLiW.jpeg?dl=1" title="image" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/9/5/95fd3548542aded4228f525e4849d380c38ad062_2_690x491.jpeg" alt="image" data-base62-sha1="loRDCpiQu3eGrFXIkjtza4kmLiW" width="690" height="491" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/9/5/95fd3548542aded4228f525e4849d380c38ad062_2_690x491.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/9/5/95fd3548542aded4228f525e4849d380c38ad062_2_1035x736.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/9/5/95fd3548542aded4228f525e4849d380c38ad062.jpeg 2x" data-dominant-color="8F99CD"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">1076×766 64.1 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>Mesh C was generated using the same methodology/modality as B and putatively corresponds to the full surface volume of mesh A.</p>
<p><div class="lightbox-wrapper"><a class="lightbox" href="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/9/0/90427b1a35254d1c0770748592e0a84808faa821.jpeg" data-download-href="/uploads/short-url/kAbbNHsmYfL5kK6hP4VxCBfmeWZ.jpeg?dl=1" title="Screen Shot 2022-07-29 at 7.17.14 PM" rel="noopener nofollow ugc"><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/9/0/90427b1a35254d1c0770748592e0a84808faa821_2_690x420.jpeg" alt="Screen Shot 2022-07-29 at 7.17.14 PM" data-base62-sha1="kAbbNHsmYfL5kK6hP4VxCBfmeWZ" width="690" height="420" srcset="https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/9/0/90427b1a35254d1c0770748592e0a84808faa821_2_690x420.jpeg, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/9/0/90427b1a35254d1c0770748592e0a84808faa821_2_1035x630.jpeg 1.5x, https://us1.discourse-cdn.com/flex002/uploads/slicer/optimized/3X/9/0/90427b1a35254d1c0770748592e0a84808faa821_2_1380x840.jpeg 2x" data-dominant-color="9298C9"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">Screen Shot 2022-07-29 at 7.17.14 PM</span><span class="informations">1444×880 90.7 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>I want to proceed to register the subset mesh with Mesh A for which I have calculations, with the intent of finding the coordinates (or index position) of the vertices so that I can subset out the calculated_values both inside and outside the region of interest.</p>
<p>Ultimately I need to derive a data table that looks like this:</p>
<pre><code class="lang-auto">region     calculated_value   X             Y              Z
mesh_a     0.596             -65.355        15.519         190.760
mesh_a     0.601             -64.811        17.557         190.816
mesh_b     0.602             -66.040        17.290         191.835
mesh_b     0.598             -64.785        16.570         190.624
mesh_b     0.598             -64.020        16.604         190.632
.....      .....             .....          ......         .....
</code></pre>
<p>Is this possible?</p>

---

## Post #2 by @jsalas424 (2022-07-30 03:25 UTC)

<p>I’ve used the IGT Model Registration module to perform a rigid registration of the region of interest (blue) onto the mesh (yellow) and am now wondering if it’s possible to get all the points corresponding to the surface area directly underneath the blue, on the yellow.</p>
<p>I’m thinking perhaps I can export both point lists and then perform a K nearest neighbors classification algorithm to fill in which point number on the yellow mesh each blue mesh vertex point corresponds to best. I’ve never tried anything like this before though.</p>
<p><img src="https://us1.discourse-cdn.com/flex002/uploads/slicer/original/3X/2/5/25d7bdae45f261c636c45cf9d5fb0a704f5b02b1.png" alt="Screen Shot 2022-07-29 at 11.22.04 PM" data-base62-sha1="5oLT8eJJauGtLk0ay30E5pw2ait" width="386" height="494"></p>

---

## Post #3 by @mau_igna_06 (2022-07-30 12:19 UTC)

<p>I would try to customize this filter inputs:<br>
<a href="https://vtk.org/doc/nightly/html/classvtkWarpVector.html" class="onebox" target="_blank" rel="noopener">https://vtk.org/doc/nightly/html/classvtkWarpVector.html</a></p>
<p>So you get the desired result</p>
<p>Hope it helps</p>

---
